<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>一起来学async/await | CharlyCheng&#39;s Blog</title>
  <meta name="description" content="一道题1234567891011121314151617181920async function async1()&amp;#123;  console.log(&amp;apos;1&amp;apos;)  await async2()  console.log(&amp;apos;2&amp;apos;)&amp;#125;async function async2()&amp;#123;  console.log(&amp;apos;3&amp;apos;)&amp;#">
<meta name="keywords" content="Promise">
<meta property="og:type" content="article">
<meta property="og:title" content="一起来学async&#x2F;await">
<meta property="og:url" content="http://yoursite.com/2018/11/30/await/index.html">
<meta property="og:site_name" content="CharlyCheng&#39;s Blog">
<meta property="og:description" content="一道题1234567891011121314151617181920async function async1()&amp;#123;  console.log(&amp;apos;1&amp;apos;)  await async2()  console.log(&amp;apos;2&amp;apos;)&amp;#125;async function async2()&amp;#123;  console.log(&amp;apos;3&amp;apos;)&amp;#">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/2018/11/30/images/co1.png">
<meta property="og:image" content="http://yoursite.com/2018/11/30/images/co2.png">
<meta property="og:updated_time" content="2019-03-11T08:33:42.551Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一起来学async&#x2F;await">
<meta name="twitter:description" content="一道题1234567891011121314151617181920async function async1()&amp;#123;  console.log(&amp;apos;1&amp;apos;)  await async2()  console.log(&amp;apos;2&amp;apos;)&amp;#125;async function async2()&amp;#123;  console.log(&amp;apos;3&amp;apos;)&amp;#">
<meta name="twitter:image" content="http://yoursite.com/2018/11/30/images/co1.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://yoursite.com/2018/11/30/await/index.html">
  
    <link rel="alternate" href="/atom.xml" title="CharlyCheng&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="//23114798.jpeg" type="image/x-icon">
  
  <link rel="stylesheet" href="/css/style.css">
  
  
  
  
</head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/CharlyCheng" target="_blank">
          <img class="img-circle img-rotate" src="/images/23114798.jpeg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">流浪的先知</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Web Developer &amp; Designer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Beijing, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">Github项目</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-books">
          <a href="/books">
            
            <i class="icon icon-book-fill"></i>
            
            <span class="menu-title">书单</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于我</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://juejin.im/user/5ad55872f265da238441129f" target="_blank" title="Juejin" data-toggle=tooltip data-placement=top><i class="icon icon-juejin"></i></a></li>
        
        <li><a href="https://segmentfault.com/a/1190000018486559" target="_blank" title="Segmentfault" data-toggle=tooltip data-placement=top><i class="icon icon-segmentfault"></i></a></li>
        
        <li><a href="https://github.com/CharlyCheng" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://github.com/CharlyCheng" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎各位交流与分享!QQ:943514986</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端学习/">前端学习</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术杂记/">技术杂记</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法、数据/">算法、数据</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node/">Node</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/">Promise</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/">leetcode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/移动端自适应/">移动端自适应</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/JavaScript/" style="font-size: 13px;">JavaScript</a> <a href="/tags/Node/" style="font-size: 13px;">Node</a> <a href="/tags/Promise/" style="font-size: 13.5px;">Promise</a> <a href="/tags/Vue/" style="font-size: 13.5px;">Vue</a> <a href="/tags/Webpack/" style="font-size: 13px;">Webpack</a> <a href="/tags/leetcode/" style="font-size: 13px;">leetcode</a> <a href="/tags/移动端自适应/" style="font-size: 13px;">移动端自适应</a> <a href="/tags/算法/" style="font-size: 14px;">算法</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/前端学习/">前端学习</a>
              </p>
              <p class="item-title">
                <a href="/2019/04/11/每日一算 -- 只出现一次的数字/" class="title">每日一算 -- 只出现一次的数字</a>
              </p>
              <p class="item-date">
                <time datetime="2019-04-11T01:27:24.382Z" itemprop="datePublished">2019-04-11</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/前端学习/">前端学习</a>
              </p>
              <p class="item-title">
                <a href="/2019/04/11/每日一算 -- 求众数/" class="title">每日一算 -- 求众数</a>
              </p>
              <p class="item-date">
                <time datetime="2019-04-11T01:27:23.568Z" itemprop="datePublished">2019-04-11</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/前端学习/">前端学习</a>
              </p>
              <p class="item-title">
                <a href="/2019/04/09/每日一算 -- 斐波那契数列类型题/" class="title">每日一算 -- 斐波那契数列类型题</a>
              </p>
              <p class="item-date">
                <time datetime="2019-04-09T14:18:49.762Z" itemprop="datePublished">2019-04-09</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/前端学习/">前端学习</a>
              </p>
              <p class="item-title">
                <a href="/2019/04/01/竟然不会函数节流跟防抖，来看这篇包学包会/" class="title">竟然不会函数节流跟防抖，来看这篇包学包会</a>
              </p>
              <p class="item-date">
                <time datetime="2019-04-01T12:17:19.642Z" itemprop="datePublished">2019-04-01</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Vue/">Vue</a>
              </p>
              <p class="item-title">
                <a href="/2019/03/21/vue errorHandler、errorCaptured/" class="title">浅出Vue errorHandler、errorCaptured错误处理机制</a>
              </p>
              <p class="item-date">
                <time datetime="2019-03-21T04:36:39.685Z" itemprop="datePublished">2019-03-21</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#一道题"><span class="toc-number">1.</span> <span class="toc-text">一道题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#理解async-await"><span class="toc-number">2.</span> <span class="toc-text">理解async/await</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#async"><span class="toc-number">2.1.</span> <span class="toc-text">async</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#await"><span class="toc-number">2.2.</span> <span class="toc-text">await</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#async函数对-Generator函数的改进"><span class="toc-number">3.</span> <span class="toc-text">async函数对 Generator函数的改进</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#async-await-错误处理"><span class="toc-number">4.</span> <span class="toc-text">async/await 错误处理</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-await" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      一起来学async/await
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2018/11/30/await/" class="article-date">
	  <time datetime="2018-11-30T08:08:54.629Z" itemprop="datePublished">2018-11-30</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/前端学习/">前端学习</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link" href="/tags/Promise/">Promise</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2018/11/30/await/#comments" class="article-comment-link">评论</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h3 id="一道题"><a href="#一道题" class="headerlink" title="一道题"></a>一道题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">async function async1()&#123;</span><br><span class="line">  console.log(&apos;1&apos;)</span><br><span class="line">  await async2()</span><br><span class="line">  console.log(&apos;2&apos;)</span><br><span class="line">&#125;</span><br><span class="line">async function async2()&#123;</span><br><span class="line">  console.log(&apos;3&apos;)</span><br><span class="line">&#125;</span><br><span class="line">console.log(&apos;4&apos;)</span><br><span class="line">setTimeout(function()&#123;</span><br><span class="line">  console.log(&apos;5&apos;) </span><br><span class="line">&#125;,0)  </span><br><span class="line">async1();</span><br><span class="line">new Promise(function(resolve)&#123;</span><br><span class="line">  console.log(&apos;6&apos;)</span><br><span class="line">  resolve();</span><br><span class="line">&#125;).then(function()&#123;</span><br><span class="line">  console.log(&apos;7&apos;)</span><br><span class="line">&#125;)</span><br><span class="line">console.log(&apos;8&apos;)</span><br></pre></td></tr></table></figure>
<h3 id="理解async-await"><a href="#理解async-await" class="headerlink" title="理解async/await"></a>理解async/await</h3><p>回调函数，事件监听，事件订阅，到 Promise 对象，再到 Generator 函数，追求解决回调地狱的问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">回调函数</span><br><span class="line">getData( a =&gt; &#123;</span><br><span class="line">    getTwoData( a, b =&gt; &#123;</span><br><span class="line">        getThreeData( b,c =&gt; &#123;</span><br><span class="line">            getFourData( c, d =&gt; &#123;</span><br><span class="line">                console.log(&apos;终于嵌套完了&apos;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">Promise改进后</span><br><span class="line">getData().then( a =&gt; &#123;</span><br><span class="line">    return getTwoData(a)</span><br><span class="line">&#125;).then( b =&gt; &#123;</span><br><span class="line">    return getThreeData(a)</span><br><span class="line">&#125;).then( c =&gt; &#123;</span><br><span class="line">    return getFourData(c)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">Generator </span><br><span class="line">function* helloWorldGenerator() &#123;</span><br><span class="line">  yield &apos;hello&apos;;</span><br><span class="line">  yield &apos;world&apos;;</span><br><span class="line">  return &apos;ending&apos;;</span><br><span class="line">&#125;</span><br><span class="line">var hw = helloWorldGenerator();</span><br><span class="line">hw.next()</span><br><span class="line">hw.next()</span><br><span class="line">hw.next()</span><br><span class="line"></span><br><span class="line">Generator 改进后+ co 模块</span><br><span class="line">const co = require(&apos;co&apos;);</span><br><span class="line">const gen = co(function* () &#123;</span><br><span class="line">  const a = yield getData();</span><br><span class="line">  const b = yield getTwoData();</span><br><span class="line">  const c = yield getThreeData();</span><br><span class="line">  const d = yield getFourData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">async/await 改进后</span><br><span class="line">async () =&gt; &#123;</span><br><span class="line">    const a = await getData()</span><br><span class="line">    const b = await getTwoData()</span><br><span class="line">    const c = await getThreeData()</span><br><span class="line">    const d = await getFourData()</span><br><span class="line">    console.log(d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="async"><a href="#async" class="headerlink" title="async"></a>async</h4><p>async/await可以说是co模块和生成器函数的语法糖。用更加清晰的语义解决js异步代码。<br>使用 async / await, 搭配 promise, 可以通过编写形似同步的代码来处理异步流程, 提高代码的简洁性和可读性<br><a href="http://www.charlycheng.xyz/2018/04/19/promise:A+%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E5%8F%8A%E5%B9%B3%E6%97%B6%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" target="_blank" rel="noopener">Promise实现</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">async function fn(args) &#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 等同于</span><br><span class="line">function fn(args) &#123;</span><br><span class="line">  return  sp(function* () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function sp(genF) &#123;</span><br><span class="line">  return new Promise(function(resolve, reject) &#123;</span><br><span class="line">    const gen = genF();</span><br><span class="line">    function step(nextF) &#123;</span><br><span class="line">      let next;</span><br><span class="line">      try &#123;</span><br><span class="line">        next = nextF();</span><br><span class="line">      &#125; catch(e) &#123;</span><br><span class="line">        return reject(e);</span><br><span class="line">      &#125;</span><br><span class="line">      if(next.done) &#123;</span><br><span class="line">        return resolve(next.value);</span><br><span class="line">      &#125;</span><br><span class="line">      Promise.resolve(next.value).then(function(v) &#123;</span><br><span class="line">        step(function() &#123; return gen.next(v); &#125;);</span><br><span class="line">      &#125;, function(e) &#123;</span><br><span class="line">        step(function() &#123; return gen.throw(e); &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    step(function() &#123; return gen.next(undefined); &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>async函数会返回一个Promise对象<br>    – async函数中是return一个值，这个值就是Promise对象中resolve的值；<br>    – async函数中是throw一个值，这个值就是Promise对象中reject的值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const imAsync = async (num) =&gt; &#123;</span><br><span class="line">  if (num &gt; 0) &#123;</span><br><span class="line">    return num // 这里相当于resolve(num)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    throw num // 这里相当于reject(num)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">imAsync(1).then( v =&gt; &#123;</span><br><span class="line">  console.log(v);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 注意这里是catch</span><br><span class="line">imAsync(0).catch( v =&gt; &#123;</span><br><span class="line">  console.log(v);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const imAsync1 =  (num) =&gt; &#123;</span><br><span class="line">  return new Promise ( (resolve, reject) =&gt; &#123;</span><br><span class="line">        if (num &gt; 0) &#123;</span><br><span class="line">            resolve(num)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            reject(num)</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">imAsync1(1).then( v =&gt; &#123;</span><br><span class="line">  console.log(v);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">imAsync1(0).catch( v =&gt; &#123;</span><br><span class="line">  console.log(v);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="await"><a href="#await" class="headerlink" title="await"></a>await</h4><p>await会暂停当前async函数的执行，等待Promise的计算结果返回以后再继续执行当前的async函数<br>    – await 等待的不是所有的异步操作，等待的只是Promise<br>    – await命令后面是一个thenable对象（即定义then方法的对象），那么await会将其等同于 Promise 对象<br>    – 任何一个await语句后面的 Promise 对象变为reject状态，那么整个async函数都会中断执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const awaitTest = async () =&gt; &#123;</span><br><span class="line">  console.log(1);  </span><br><span class="line">  await setTimeout(function () &#123;</span><br><span class="line">    console.log(2);</span><br><span class="line">  &#125;, 1000);</span><br><span class="line">  console.log(3);</span><br><span class="line">&#125;</span><br><span class="line">awaitTest()</span><br><span class="line"></span><br><span class="line">const awaitTest = async () =&gt; &#123;</span><br><span class="line">  console.log(1);  </span><br><span class="line">  await new Promise ( (resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">        console.log(2);</span><br><span class="line">        console.time(&apos;beigin&apos;)</span><br><span class="line">        resolve()</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">  &#125;)</span><br><span class="line">  console.timeEnd(&apos;beigin&apos;)</span><br><span class="line">  console.log(3);</span><br><span class="line">&#125;</span><br><span class="line">awaitTest()</span><br></pre></td></tr></table></figure></p>
<h3 id="async函数对-Generator函数的改进"><a href="#async函数对-Generator函数的改进" class="headerlink" title="async函数对 Generator函数的改进"></a>async函数对 Generator函数的改进</h3><p>（1）内置执行器<br>Generator 函数的执行必须靠执行器，所以才有了co模块，而async函数自带执行器。也就是说，<br>（2）更好的语义<br>（3）更广的适用性<br>（4）返回值是 Promise</p>
<p>await用于一个异步操作之前，表示要“等待”这个异步操作的返回值。await也可以用于一个同步的值。<br>co 函数库其实就是将两种自动执行器（Thunk 函数和 Promise 对象），包装成一个库<br>接受 Generator 函数作为参数，返回一个 Promise 对象，不用编写 Generator 函数的执行器</p>
<p><img src="../images/co1.png" alt=""><br><img src="../images/co2.png" alt=""><br>toPromise<br>通过判定参数的类型，然后再通过转移控制权给不同的参数处理函数，从而获取到期望返回的值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">function toPromise(obj) &#123;</span><br><span class="line">  if (!obj) return obj;</span><br><span class="line">  if (isPromise(obj)) return obj;</span><br><span class="line">  if (isGeneratorFunction(obj) || isGenerator(obj)) return co.call(this, obj);</span><br><span class="line">  if (&apos;function&apos; == typeof obj) return thunkToPromise.call(this, obj);</span><br><span class="line">  if (Array.isArray(obj)) return arrayToPromise.call(this, obj);</span><br><span class="line">  if (isObject(obj)) return objectToPromise.call(this, obj);</span><br><span class="line">  return obj;</span><br><span class="line">&#125;</span><br><span class="line">function objectToPromise(obj)&#123;</span><br><span class="line">  //获取一个和传入的对象一样构造器的对象</span><br><span class="line">  var results = new obj.constructor();</span><br><span class="line">  //获取对象的所有可以遍历的key</span><br><span class="line">  var keys = Object.keys(obj);</span><br><span class="line">  var promises = [];</span><br><span class="line">  for (var i = 0; i &lt; keys.length; i++) &#123;</span><br><span class="line">    var key = keys[i];</span><br><span class="line">    //每一个项都调用一次toPromise方法，变成Promise对象</span><br><span class="line">    var promise = toPromise.call(this, obj[key]);</span><br><span class="line">    //如果里面是Promise对象的话，则取出e里面resolved后的值</span><br><span class="line">    if (promise &amp;&amp; isPromise(promise)) defer(promise, key);</span><br><span class="line">    else results[key] = obj[key];</span><br><span class="line">  &#125;</span><br><span class="line">  //并行，按顺序返回结果，返回一个数组</span><br><span class="line">  return Promise.all(promises).then(function () &#123;</span><br><span class="line">    return results;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  function defer(promise, key) &#123;</span><br><span class="line">    results[key] = undefined;</span><br><span class="line">    promises.push(promise.then(function (res) &#123;</span><br><span class="line">      results[key] = res;</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function thunkToPromise(fn) &#123;</span><br><span class="line">  var ctx = this;</span><br><span class="line">  return new Promise(function (resolve, reject) &#123;</span><br><span class="line">    fn.call(ctx, function (err, res) &#123;</span><br><span class="line">      if (err) return reject(err);</span><br><span class="line">      if (arguments.length &gt; 2) res = slice.call(arguments, 1);</span><br><span class="line">      resolve(res);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function arrayToPromise(obj) &#123;</span><br><span class="line">  return Promise.all(obj.map(toPromise, this));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isPromise(obj) &#123;</span><br><span class="line">  return &apos;function&apos; == typeof obj.then;</span><br><span class="line">&#125;</span><br><span class="line">function isGenerator(obj) &#123;</span><br><span class="line">  return &apos;function&apos; == typeof obj.next &amp;&amp; &apos;function&apos; == typeof obj.throw;</span><br><span class="line">&#125;</span><br><span class="line">function isGeneratorFunction(obj) &#123;</span><br><span class="line">  var constructor = obj.constructor;</span><br><span class="line">  if (!constructor) return false;</span><br><span class="line">  if (&apos;GeneratorFunction&apos; === constructor.name || &apos;GeneratorFunction&apos; === constructor.displayName) return true;</span><br><span class="line">  return isGenerator(constructor.prototype);</span><br><span class="line">&#125;</span><br><span class="line">function isObject(val) &#123;</span><br><span class="line">  return Object == val.constructor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="async-await-错误处理"><a href="#async-await-错误处理" class="headerlink" title="async/await 错误处理"></a>async/await 错误处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">async function f() &#123;</span><br><span class="line">  await Promise.reject(&apos;出错了&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f()</span><br><span class="line">.then(v =&gt; console.log(&apos;1&apos;, v))</span><br><span class="line">.catch(e =&gt; console.log(&apos;错误&apos;, e))</span><br><span class="line">// 出错了</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">async function f() &#123;</span><br><span class="line">  let a = await Promise.reject(&apos;hello world1&apos;);</span><br><span class="line">  let b = await Promise.resolve(&apos;hello world2&apos;); // 不会执行</span><br><span class="line">  console.log(a, b)</span><br><span class="line">&#125;</span><br><span class="line">f()</span><br><span class="line">.then(v =&gt; console.log(&apos;1&apos;, v))</span><br><span class="line">.then(v =&gt; console.log(&apos;2&apos;, v))</span><br><span class="line">.catch(e =&gt; console.log(&apos;错误&apos;, e))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">async function f() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    await Promise.reject(&apos;出错了&apos;);</span><br><span class="line">  &#125; catch(e) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  return await Promise.resolve(&apos;hello world&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f()</span><br><span class="line">.then(v =&gt; console.log(v))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">async function f() &#123;</span><br><span class="line">  await Promise.reject(&apos;出错了&apos;)</span><br><span class="line">    .catch(e =&gt; console.log(e));</span><br><span class="line">  return await Promise.resolve(&apos;hello world&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f()</span><br><span class="line">.then(v =&gt; console.log(v))</span><br><span class="line">// 出错了</span><br><span class="line">// hello world</span><br></pre></td></tr></table></figure>
<p>如果有多个await命令，可以统一放在try…catch结构中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">async function main() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    const val1 = await Promise.reject(&apos;出错了&apos;);</span><br><span class="line">    const val2 = await Promise.resolve(&apos;爱你1&apos;);</span><br><span class="line">    const val3 = await Promise.resolve(&apos;爱你2&apos;);</span><br><span class="line"></span><br><span class="line">    console.log(&apos;Final: &apos;, val2);</span><br><span class="line">  &#125;</span><br><span class="line">  catch (err) &#123;</span><br><span class="line">    console.error(&apos;error&apos;, err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">main()</span><br></pre></td></tr></table></figure></p>
<p>try…catch结构，实现多次重复尝试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const NUM_RETRIES = 3;</span><br><span class="line">async function test() &#123;</span><br><span class="line">  let i;</span><br><span class="line">  for (i = 0; i &lt; NUM_RETRIES; ++i) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      await Promise.resolve(&apos;出错了&apos;);</span><br><span class="line">      break;</span><br><span class="line">    &#125; catch(err) &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test();</span><br></pre></td></tr></table></figure>
<p>多个await命令后面的异步操作，如果不存在继发关系，最好让它们同时触发<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let [foo, bar] = await Promise.all([getFoo(), getBar()]);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://yoursite.com/2018/11/30/await/" title="一起来学async/await" target="_blank" rel="external">http://yoursite.com/2018/11/30/await/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/CharlyCheng" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/23114798.jpeg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/CharlyCheng" target="_blank"><span class="text-dark">流浪的先知</span><small class="ml-1x">Web Developer &amp; Designer</small></a></h3>
        <div>个人简介。</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2018/12/10/node图片合成你可以做到/" title="node 实现图片合成"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2018/11/27/promise实践分享/" title="Promise实践"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://juejin.im/user/5ad55872f265da238441129f" target="_blank" title="Juejin" data-toggle=tooltip data-placement=top><i class="icon icon-juejin"></i></a></li>
        
        <li><a href="https://segmentfault.com/a/1190000018486559" target="_blank" title="Segmentfault" data-toggle=tooltip data-placement=top><i class="icon icon-segmentfault"></i></a></li>
        
        <li><a href="https://github.com/CharlyCheng" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://github.com/CharlyCheng" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script src="/js/plugin.min.js"></script>
<script src="/js/application.js"></script>

    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>





   




   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: '',
    appKey: '',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     







</body>
</html>