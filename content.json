{"meta":{"title":"CharlyCheng's Blog","subtitle":null,"description":null,"author":"John Doe","url":"http://yoursite.com","root":"/"},"pages":[{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2019-03-11T07:42:33.185Z","updated":"2019-03-11T07:42:33.184Z","comments":false,"path":"/404.html","permalink":"http://yoursite.com//404.html","excerpt":"","text":""},{"title":"ä¸ªäººç®€ä»‹","date":"2019-03-26T07:07:44.650Z","updated":"2019-03-26T07:07:44.650Z","comments":false,"path":"about/index.html","permalink":"http://yoursite.com/about/index.html","excerpt":"","text":""},{"title":"ä¹¦å•","date":"2019-03-11T07:40:16.369Z","updated":"2019-03-11T07:40:16.369Z","comments":false,"path":"books/index.html","permalink":"http://yoursite.com/books/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2019-03-11T07:42:33.190Z","updated":"2019-03-11T07:42:33.190Z","comments":true,"path":"links/index.html","permalink":"http://yoursite.com/links/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2019-03-11T07:39:30.697Z","updated":"2019-03-11T07:39:30.696Z","comments":false,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2019-03-11T07:39:21.832Z","updated":"2019-03-11T07:39:21.831Z","comments":false,"path":"repository/index.html","permalink":"http://yoursite.com/repository/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2019-03-11T07:42:33.194Z","updated":"2019-03-11T07:42:33.194Z","comments":false,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"æ¯æ—¥ä¸€ç®— -- æ–æ³¢é‚£å¥‘æ•°åˆ—ç±»å‹é¢˜","slug":"æ¯æ—¥ä¸€ç®— -- æ–æ³¢é‚£å¥‘æ•°åˆ—ç±»å‹é¢˜","date":"2019-04-09T14:18:49.762Z","updated":"2019-04-09T14:26:02.952Z","comments":true,"path":"2019/04/09/æ¯æ—¥ä¸€ç®— -- æ–æ³¢é‚£å¥‘æ•°åˆ—ç±»å‹é¢˜/","link":"","permalink":"http://yoursite.com/2019/04/09/æ¯æ—¥ä¸€ç®— -- æ–æ³¢é‚£å¥‘æ•°åˆ—ç±»å‹é¢˜/","excerpt":"","text":"é¢˜ç›®å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ n é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚æ¯æ¬¡ä½ å¯ä»¥çˆ¬ 1 æˆ– 2 ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿæ³¨æ„ï¼šç»™å®š n æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚ æ—¥å¸¸æ‰¾è§„å¾‹ å½“æœ‰1é˜¶æ—¶ F(1) = 1 å½“æœ‰2é˜¶æ—¶ F(2) = 2(å¯ä»¥1é˜¶æˆ–è€…2é˜¶) å½“æœ‰3é˜¶æ—¶ F(3) = 3(å¯ä»¥1é˜¶æˆ–è€…1ã€2é˜¶æˆ–è€…2ã€1) å½“æœ‰4é˜¶æ—¶ F(4) = 5(å¯ä»¥1é˜¶æˆ–è€…1ã€2ã€1ã€1é˜¶æˆ–2ã€1ã€1ã€1æˆ–2ã€2ã€1æˆ–2ã€1ã€2) â€¦ å½“æœ‰né˜¶æ—¶ F(n) = F(n - 1) + F(n - 2)123F(1)=1F(2)=2F(n)=F(n-1)+F(n-2) å®ç°æ–¹å¼å½“æˆ‘ä»¬å¾—åˆ°æ¨å¯¼å…¬å¼ï¼Œå®ç°å‡½æ•°è„‘æµ·é‡Œé¢ä¼šæƒ³åˆ°é€’å½’å®ç° é€’å½’ æ—¶é—´å¤æ‚åº¦: O(2^n)123456789function fiber (n) &#123; if ( n === 1) &#123; return 1 &#125; if ( n === 2) &#123; return 2 &#125; return fiber( n - 1) + fiber( n - 2 )&#125; å¾ªç¯ æ—¶é—´å¤æ‚åº¦: O(n) ç©ºé—´å¤æ‚åº¦: O(n)1234567891011121314function fiber (n) &#123; let step = [] step[0] = 1 if ( n &gt;= 2) &#123; step[1] = 2 &#125; if ( n &lt;= 2) &#123; return n &#125; for ( let i = 2; i &lt;= n; i++) &#123; step[i] = step[i - 1] + step[i - 2] &#125; return step[n]&#125; å¾ªç¯ + ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ æ—¶é—´å¤æ‚åº¦: O(n) ç©ºé—´å¤æ‚åº¦: O(1)1234567891011121314function fiber (n) &#123; let prev1 = 1 let prev2 = 2 let result = 0 if ( n &lt;= 2) &#123; return n &#125; for ( let i = 2; i &lt;= n; i++) &#123; result = prev1 + prev2 prev1 = prev2 prev2 = result &#125; return result&#125; æ€»ç»“ JavaScriptä¸“é¢˜ä¹‹é€’å½’ é’è›™è·³ åŠ¨æ€è§„åˆ’","categories":[{"name":"å‰ç«¯å­¦ä¹ ","slug":"å‰ç«¯å­¦ä¹ ","permalink":"http://yoursite.com/categories/å‰ç«¯å­¦ä¹ /"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/tags/ç®—æ³•/"}]},{"title":"ç«Ÿç„¶ä¸ä¼šå‡½æ•°èŠ‚æµè·Ÿé˜²æŠ–ï¼Œæ¥çœ‹è¿™ç¯‡åŒ…å­¦åŒ…ä¼š","slug":"ç«Ÿç„¶ä¸ä¼šå‡½æ•°èŠ‚æµè·Ÿé˜²æŠ–ï¼Œæ¥çœ‹è¿™ç¯‡åŒ…å­¦åŒ…ä¼š","date":"2019-04-01T12:17:19.642Z","updated":"2019-04-09T13:19:44.811Z","comments":true,"path":"2019/04/01/ç«Ÿç„¶ä¸ä¼šå‡½æ•°èŠ‚æµè·Ÿé˜²æŠ–ï¼Œæ¥çœ‹è¿™ç¯‡åŒ…å­¦åŒ…ä¼š/","link":"","permalink":"http://yoursite.com/2019/04/01/ç«Ÿç„¶ä¸ä¼šå‡½æ•°èŠ‚æµè·Ÿé˜²æŠ–ï¼Œæ¥çœ‹è¿™ç¯‡åŒ…å­¦åŒ…ä¼š/","excerpt":"","text":"å‰è¨€å‰ç«¯å¼€å‘ä¸­ä¼šé‡åˆ°ä¸€äº›é¢‘ç¹çš„äº‹ä»¶è§¦å‘ï¼Œæ¯”å¦‚ï¼šwindowçš„scrollã€resizeï¼›mousedownã€mousemoveï¼Œkeyupã€keydownç­‰ç­‰ï¼Œå‡å¦‚ä½ å¯¹è‡ªå·±çš„ä»£ç ä¸åšä»€ä¹ˆçš„å¤„ç†ï¼Œä½ ä¼šå‘ç°é¡µé¢å¡é¡¿ã€è§¦å‘æ¥å£è¯·æ±‚é¢‘ç¹ç­‰é—®é¢˜ï¼Œæœ¬æ–‡å°†æµ…æå‡½æ•°èŠ‚æµè·Ÿé˜²æŠ–å®ç°ï¼Œä¸€æ­¥ä¸€æ­¥é€æ¸æ­å¼€å‡½æ•°èŠ‚æµè·Ÿé˜²æŠ–çš„çœŸé¢ç›®ğŸ’œ æ¦‚å¿µç†è§£é˜²æŠ–è·ŸèŠ‚æµè§¦å‘åŸç†ï¼Œæ ¹æ®ä¸åŒä½¿ç”¨åœºæ™¯åˆç†ä½¿ç”¨ å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰1å½“è°ƒç”¨åŠ¨ä½œè¿‡næ¯«ç§’åï¼Œæ‰ä¼šæ‰§è¡Œè¯¥åŠ¨ä½œï¼Œè‹¥åœ¨è¿™næ¯«ç§’å†…åˆè°ƒç”¨æ­¤åŠ¨ä½œåˆ™å°†é‡æ–°è®¡ç®—æ‰§è¡Œæ—¶é—´,ä¸ä¼šæ‰§è¡Œ ç†è§£åŸç†:å°½ç®¡è§¦å‘äº‹ä»¶ï¼Œä½†æ˜¯ä¸€å®šåœ¨äº‹ä»¶è§¦å‘ n ç§’åæ‰æ‰§è¡Œï¼Œå¦‚æœåœ¨ä¸€ä¸ªäº‹ä»¶è§¦å‘çš„ n ç§’å†…åˆè§¦å‘äº†è¿™ä¸ªäº‹ä»¶ï¼Œå°±ä»¥æ–°çš„äº‹ä»¶çš„æ—¶é—´ä¸ºå‡†ï¼Œnç§’åæ‰æ‰§è¡Œï¼Œæ€»ä¹‹ï¼Œå°±æ˜¯è¦ç­‰è§¦å‘å®Œäº‹ä»¶ n ç§’å†…ä¸å†è§¦å‘äº‹ä»¶ï¼Œæ‰ä¼šæ‰§è¡Œ! å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰1é¢„å…ˆè®¾å®šä¸€ä¸ªæ‰§è¡Œå‘¨æœŸï¼Œå½“è°ƒç”¨åŠ¨ä½œçš„æ—¶åˆ»å¤§äºç­‰äºæ‰§è¡Œå‘¨æœŸåˆ™æ‰§è¡Œè¯¥åŠ¨ä½œï¼Œç„¶åè¿›å…¥ä¸‹ä¸€ä¸ªæ–°å‘¨æœŸ ç†è§£åŸç†:è§„å®šæ—¶é—´å†…ï¼Œä¿è¯æ‰§è¡Œä¸€æ¬¡è¯¥å‡½æ•° å®ç°é˜²æŠ–æ ¹æ®é˜²æŠ–åŸç†ï¼Œå®ç°ä»£ç å¦‚ä¸‹,ä¹‹åçš„ç¤ºä¾‹éƒ½å°†æ˜¯å¸¸è§„ä½¿ç”¨:1234567891011121314# ç®­å¤´logå‡½æ•°let count = 0const log = () =&gt; &#123; console.log(this) ++count console.log(count)&#125;# å‡½æ•°è¡¨è¾¾å¼const log = function (evt) &#123; console.log(this) console.log(evt) ++count console.log(count)&#125; 123456789const debounce = function (fn, delay)&#123; let timeout = null return function () &#123; if (timeout) &#123; clearTimeout(timeout) &#125; timeout = setTimeout(fn, delay) &#125;&#125; ä½¿ç”¨é¢‘ç¹clickäº‹ä»¶ä¸ºä¾‹å¸¸è§„ä½¿ç”¨: meContain.onclick = debounce(log, 1000)react demo: â€¦onClick={debounce(log.bind(this), 1000)}é€šè¿‡ä¾‹å­ä½ ä¼šå‘ç°ï¼Œ1sä¹‹å†…é¢‘ç¹clickï¼Œéƒ½ä¼šåœ¨æœ€åè¾“å‡ºä¸€æ¬¡logï¼ŒéªŒè¯äº†é˜²æŠ–åŸç† å°ä¼™ä¼´ä»¬æœ‰æ²¡æœ‰å‘ç°æ­¤æ—¶çš„é˜²æŠ–å‡½æ•°ä»å­˜åœ¨ç¼ºé™· thisæŒ‡å‘å’Œevent å¯¹è±¡ å‡å¦‚ç”¨æˆ·ç°åœ¨ä¸€ç›´ç‚¹å‡»æäº¤æŒ‰é’®çš„è¯ï¼Œå°±ä¼šä¸€ç›´ä¸å‘å‡ºè¯·æ±‚ï¼Œä¹Ÿå¾—ä¸åˆ°ä»»ä½•æç¤ºï¼Œå¯¹ç”¨æˆ·ä½“éªŒç›¸å½“ä¸å¥½ thisæŒ‡å‘å’Œevent å¯¹è±¡ thisæŒ‡å‘ logå‡½æ•°ä¸­ console.log(this),ä¸ä½¿ç”¨ debounce å‡½æ•°çš„æ—¶å€™ï¼Œthis çš„å€¼ä¸ºï¼šundefined, è¿™æ˜¯å› ä¸ºä½¿ç”¨äº†ç®­å¤´å‡½æ•°ï¼Œæ­¤æ—¶éœ€è¦onClickè°ƒç”¨çš„æ—¶å€™bind(this), thisæŒ‡å‘reactç»„ä»¶ç¤ºä¾‹ å¸¸è§„ä½¿ç”¨ä¸­console.log(this)ï¼Œä¸ä½¿ç”¨ debounce å‡½æ•°çš„æ—¶å€™ï¼Œthis çš„å€¼ä¸ºï¼ševent å¯¹è±¡ ä¸ä½¿ç”¨ debouce å‡½æ•°ï¼Œä¼šæ‰“å° ClickEvent å¯¹è±¡ debounce å‡½æ•°ä¸­ï¼Œå´åªä¼šæ‰“å° undefined è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œæ¥æ›´æ”¹æˆ‘ä»¬çš„ä»£ç 1234567891011const debounce = function (fn, delay)&#123; let timeout = null return function () &#123; const context = this; const args = arguments; clearTimeout(timeout) timeout = setTimeout(() =&gt; &#123; fn.apply(context, args) &#125;, delay) &#125;&#125; äº¤äº’ä¼˜åŒ–ä½“éªŒå¦‚æœå¸Œæœ›ç«‹åˆ»æ‰§è¡Œå‡½æ•°ä¸€æ¬¡ï¼Œä¸ç”¨ç­‰åˆ°äº‹ä»¶åœæ­¢è§¦å‘åæ‰æ‰§è¡Œï¼Œç„¶åç­‰åˆ°åœæ­¢è§¦å‘ n ç§’åï¼Œå†å¯ä»¥é‡æ–°è§¦å‘æ‰§è¡Œé€šè¿‡æ·»åŠ isImmeDiateæ¥åˆ¤æ–­æ˜¯å¦ç«‹åˆ»æ‰§è¡Œ123456789101112131415161718192021const debounce = function (fn, delay,isImmeDiate= false)&#123; let timeout = null return function () &#123; const context = this; const args = arguments; if(timeout) clearTimeout(timeout) if(isImmeDiate) &#123; # åˆ¤æ–­æ˜¯å¦å·²ç»æ‰§è¡Œè¿‡ï¼Œä¸è¦é‡å¤æ‰§è¡Œ let callNow = !timeout timeout = setTimeout(function()&#123; timeout = null; &#125;, delay) if(callNow) result = fn.apply(context, args) &#125; else &#123; timeout = setTimeout(() =&gt; &#123; fn.apply(context, args) &#125;, delay) &#125; return result &#125;&#125; å¦‚æœè¦æ·»åŠ ä¸€ä¸ªå–æ¶ˆdebounceå¼€å…³ï¼Œåªéœ€è¦æ·»åŠ ä¸€ä¸ªcancleå‡½æ•°æ¸…é™¤å®šæ—¶å™¨timeout = null123456789101112131415161718192021222324252627const debounce = function (fn, delay,isImmeDiate= false)&#123; let timeout = null const debounced = function () &#123; const context = this; const args = arguments; if(timeout) clearTimeout(timeout) if(isImmeDiate) &#123; # åˆ¤æ–­æ˜¯å¦å·²ç»æ‰§è¡Œè¿‡ï¼Œä¸è¦é‡å¤æ‰§è¡Œ # setTimeoutä¹Ÿæ˜¯ä¸€ç›´åœ¨æ›´æ–°çš„ let callNow = !timeout timeout = setTimeout(function()&#123; timeout = null; &#125;, delay) if(callNow) result = fn.apply(context, args) &#125; else &#123; timeout = setTimeout(() =&gt; &#123; fn.apply(context, args) &#125;, delay) &#125; return result &#125; debounced.prototype.cancle = function() &#123; clearTimeout(timeout) timeout = null &#125; return debounced&#125; åˆ°è¿™é‡Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªé˜²æŠ–å‡½æ•°ï¼Œä½†æ˜¯å°ä¼™ä¼´ä»¬æœ‰æ²¡æœ‰åˆ«çš„æƒ³æ³•å‘¢ï¼Ÿ èŠ‚æµæ ¹æ®èŠ‚æµåŸç†ï¼Œå®ç°ä»£ç å¦‚ä¸‹,ä¹‹åçš„ç¤ºä¾‹éƒ½å°†æ˜¯å¸¸è§„ä½¿ç”¨: æ—¶é—´æˆ³å®ç°123456789101112const throttle = function (fn, delay) &#123; let preTime = 0; return function () &#123; const context = this; const args = arguments; const now = +new Date(); if (now - preTime &gt; delay) &#123; fn.apply(context, args); preTime = now; &#125; &#125;&#125; å®šæ—¶å™¨å®ç°12345678910111213141516171819const throttle = function (fn, delay) &#123; let timeout = null return function () &#123; const context = this; const args = arguments; if (!timeout) &#123; timeout = setTimeout(function()&#123; timeout = null fn.apply(context, args) &#125;, delay) &#125; &#125;&#125;# å¦‚æœéœ€è¦ç«‹åˆ»æ‰§è¡Œï¼Œå…¶å®å˜æ›´ä¸‹æ‰§è¡Œé¡ºåºå³å¯timeout = setTimeout(function()&#123; timeout = null //fn.apply(context, args)&#125;, delay)fn.apply(context, args) åŒæ ·ä½¿ç”¨é¢‘ç¹clickäº‹ä»¶ä¸ºä¾‹å¸¸è§„ä½¿ç”¨: meContain.onclick = throttle(log, 1000)é€šè¿‡ä¾‹å­ä½ ä¼šå‘ç°ï¼Œé¢‘ç¹clickï¼Œéƒ½ä¼šåœ¨æ ¹æ®ä½ è®¾å®šçš„å‘¨æœŸè¾“å‡ºä¸€æ¬¡logï¼ŒéªŒè¯äº†èŠ‚æµåŸç† å°ä¼™ä¼´ä»¬æœ‰æ²¡æœ‰å‘ç°æ­¤æ—¶çš„èŠ‚æµå‡½æ•°å­˜åœ¨çš„ç‰¹ç‚¹ æ—¶é—´æˆ³ä¼šç«‹åˆ»æ‰§è¡Œï¼Œå®šæ—¶å™¨ä¼šåœ¨ n ç§’åç¬¬ä¸€æ¬¡æ‰§è¡Œ æ—¶é—´æˆ³åœæ­¢è§¦å‘åæ²¡æœ‰åŠæ³•å†æ‰§è¡Œäº‹ä»¶ï¼Œå®šæ—¶å™¨å®ç°åœæ­¢è§¦å‘åä¾ç„¶ä¼šå†æ‰§è¡Œä¸€æ¬¡äº‹ä»¶ åˆå¹¶ä¸¤è€…ç‰¹ç‚¹123456789101112131415161718192021222324252627282930313233const throttle = function (fn, delay) &#123; let timeout = null let preTime = 0; const later = function() &#123; preTime = +new Date() timeout = null fn.apply(context, args); &#125; const throttled = function () &#123; const context = this; const args = arguments; const now = +new Date(); #ä¸‹æ¬¡è§¦å‘fnå‰©ä½™çš„æ—¶é—´ const remaining = delay - ( now - preTime) #å¦‚æœæ²¡æœ‰å‰©ä½™çš„æ—¶é—´äº†æˆ–è€…ç³»ç»Ÿæ—¶é—´å˜æ›´ if (remaining &lt;= 0 || remaining &gt; delay) &#123; if(timeout) &#123; clearTimeout(timeout) timeout = null &#125; preTime = now fn.apply(context, args); &#125; else if (!timeout) &#123; timeout = setTimeout(later, remaining) &#125; &#125; throttled.cancel = function() &#123; clearTimeout(timeout); previous = 0; timeout = null; &#125; return throttled&#125; æ€»ç»“èŠ‚æµï¼Œåœ¨è§„å®šæ—¶é—´å†…ï¼Œä¿è¯æ‰§è¡Œä¸€æ¬¡è¯¥å‡½æ•°ï¼›é˜²æŠ–ï¼Œå½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸€å®šæ—¶é—´æ®µå†…æ²¡æœ‰å†è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœè®¾å®šçš„æ—¶é—´åˆ°æ¥ä¹‹å‰ï¼Œåˆä¸€æ¬¡è§¦å‘äº†äº‹ä»¶ï¼Œå°±é‡æ–°å¼€å§‹å»¶æ—¶ æ–‡æ¡£æµ…è°ˆå‡½æ•°é˜²æŠ–å‡½æ•°èŠ‚æµå‡½æ•°é˜²æŠ–å‡½æ•°èŠ‚æµ è‡ªæˆ‘æ¨èæ·±å…¥æºç äº†è§£Vueé”™è¯¯å¤„ç†Webpack DllPluginè®©æ„å»ºé€Ÿåº¦æŸ”é¡ºä¸æ»‘","categories":[{"name":"å‰ç«¯å­¦ä¹ ","slug":"å‰ç«¯å­¦ä¹ ","permalink":"http://yoursite.com/categories/å‰ç«¯å­¦ä¹ /"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://yoursite.com/tags/JavaScript/"}]},{"title":"æµ…å‡ºVue errorHandlerã€errorCapturedé”™è¯¯å¤„ç†æœºåˆ¶","slug":"vue errorHandlerã€errorCaptured","date":"2019-03-21T04:36:39.685Z","updated":"2019-03-25T06:15:49.843Z","comments":true,"path":"2019/03/21/vue errorHandlerã€errorCaptured/","link":"","permalink":"http://yoursite.com/2019/03/21/vue errorHandlerã€errorCaptured/","excerpt":"","text":"å¼•å­JavaScriptæœ¬èº«æ˜¯ä¸€ä¸ªå¼±ç±»å‹è¯­è¨€ï¼Œé¡¹ç›®ä¸­å®¹æ˜“å‘ç”Ÿé”™è¯¯ï¼Œåšå¥½ç½‘é¡µé”™è¯¯ç›‘æ§ï¼Œèƒ½å¸®åŠ©å¼€å‘è€…è¿…é€Ÿå®šä½é—®é¢˜ï¼Œä¿è¯çº¿ä¸Šç¨³å®šã€‚vueé¡¹ç›®éœ€æ¥å…¥å…¬å¸å†…éƒ¨ç›‘æ§å¹³å°ï¼Œæœ¬äººä¹‹å‰vue errorHooksä¸ç”šäº†è§£, å†³å®šæ¢ä¸€æ¢ğŸ–¼ ä»‹ç» errorHandlerã€errorCapturedæ–‡æ¡£ä¼ é€é—¨: errorHandlerã€errorCaptured errorHandleræŒ‡å®šç»„ä»¶çš„æ¸²æŸ“å’Œè§‚å¯ŸæœŸé—´æœªæ•è·é”™è¯¯çš„å¤„ç†å‡½æ•°ã€‚è¿™ä¸ªå¤„ç†å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå¯è·å–é”™è¯¯ä¿¡æ¯å’Œ Vue å®ä¾‹1234567Vue.config.errorHandler = function (err, vm, info) &#123; #å¤„ç†é”™è¯¯ä¿¡æ¯, è¿›è¡Œé”™è¯¯ä¸ŠæŠ¥ #erré”™è¯¯å¯¹è±¡ #vm Vueå®ä¾‹ #`info` æ˜¯ Vue ç‰¹å®šçš„é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯æ‰€åœ¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­ #åªåœ¨ 2.2.0+ å¯ç”¨&#125; ç‰ˆæœ¬åˆ†å‰²ç‚¹ 2.2.0 èµ·ï¼Œæ•è·ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­é‡Œçš„é”™è¯¯ã€‚åŒæ ·çš„ï¼Œå½“è¿™ä¸ªé’©å­æ˜¯ undefined æ—¶ï¼Œè¢«æ•è·çš„é”™è¯¯ä¼šé€šè¿‡ console.error è¾“å‡ºè€Œé¿å…åº”ç”¨å´©æºƒ 2.4.0 èµ·ï¼Œä¹Ÿä¼šæ•è· Vue è‡ªå®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°å†…éƒ¨çš„é”™è¯¯ 2.6.0 èµ·ï¼Œä¹Ÿä¼šæ•è· v-on DOM ç›‘å¬å™¨å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ã€‚å¦å¤–ï¼Œå¦‚æœä»»ä½•è¢«è¦†ç›–çš„é’©å­æˆ–å¤„ç†å‡½æ•°è¿”å›ä¸€ä¸ª Promise é“¾ (ä¾‹å¦‚ async å‡½æ•°)ï¼Œåˆ™æ¥è‡ªå…¶ Promise é“¾çš„é”™è¯¯ä¹Ÿä¼šè¢«å¤„ç† errorCapturedå½“æ•è·ä¸€ä¸ªæ¥è‡ªå­å­™ç»„ä»¶çš„é”™è¯¯æ—¶è¢«è°ƒç”¨ã€‚æ­¤é’©å­ä¼šæ”¶åˆ°ä¸‰ä¸ªå‚æ•°ï¼šé”™è¯¯å¯¹è±¡ã€å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶å®ä¾‹ä»¥åŠä¸€ä¸ªåŒ…å«é”™è¯¯æ¥æºä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚æ­¤é’©å­å¯ä»¥è¿”å› false ä»¥é˜»æ­¢è¯¥é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­ é”™è¯¯ä¼ æ’­è§„åˆ™ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå…¨å±€çš„ config.errorHandlerå®šä¹‰ï¼Œæ‰€æœ‰çš„é”™è¯¯ä»ä¼šå‘é€å®ƒï¼Œå› æ­¤è¿™äº›é”™è¯¯ä»ç„¶ä¼šå‘å•ä¸€çš„åˆ†ææœåŠ¡çš„åœ°æ–¹è¿›è¡Œæ±‡æŠ¥ å¦‚æœä¸€ä¸ªç»„ä»¶çš„ç»§æ‰¿æˆ–çˆ¶çº§ä»å±é“¾è·¯ä¸­å­˜åœ¨å¤šä¸ª errorCaptured é’©å­ï¼Œåˆ™å®ƒä»¬å°†ä¼šè¢«ç›¸åŒçš„é”™è¯¯é€ä¸ªå”¤èµ·ã€‚ å¦‚æœæ­¤ errorCaptured é’©å­è‡ªèº«æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œåˆ™è¿™ä¸ªæ–°é”™è¯¯å’ŒåŸæœ¬è¢«æ•è·çš„é”™è¯¯éƒ½ä¼šå‘é€ç»™å…¨å±€çš„ config.errorHandlerï¼Œä¸èƒ½æ•è·å¼‚æ­¥promiseå†…éƒ¨æŠ›å‡ºçš„é”™è¯¯å’Œè‡ªèº«çš„é”™è¯¯ ä¸€ä¸ª errorCaptured é’©å­èƒ½å¤Ÿè¿”å› false ä»¥é˜»æ­¢é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­ã€‚æœ¬è´¨ä¸Šæ˜¯è¯´â€œè¿™ä¸ªé”™è¯¯å·²ç»è¢«æå®šäº†ä¸”åº”è¯¥è¢«å¿½ç•¥â€ã€‚å®ƒä¼šé˜»æ­¢å…¶å®ƒä»»ä½•ä¼šè¢«è¿™ä¸ªé”™è¯¯å”¤èµ·çš„ errorCaptured é’©å­å’Œå…¨å±€çš„ config.errorHandler é”™è¯¯ä¿¡æ¯ç¤ºä¾‹ errorHandlerã€errorCapturedå…‰è¯´ä¸ç»ƒï¼Œè¯´äº†ç™½å¹²ï¼Œå‘ˆä¸Šç»“æœä¾›å„ä½çœ‹å®˜è€çˆ·æŸ¥çœ‹ mounted hook å†™å…¥æœªå®šä¹‰çš„å˜é‡ï¼Œä¾‹å¦‚ï¼šamounted() { a} Vue.config.errorHandler errã€vmã€info Vue.config.errorHandler æŠ›å‡ºåŒæ ·çš„é”™è¯¯ throw errglobalHandleErrorå‡½æ•°æœ‰ e !== err åˆ¤æ–­é˜²æ­¢logä¸¤æ¬¡é”™è¯¯ Vue.config.errorHandler æŠ›å‡ºæ–°çš„é”™è¯¯ throw new Error(â€˜ä½ å¥½æ¯’â€™) errorCaptured (err, vm, info) =&gt; ?Boolean ç±»ä¼¼äºReact é”™è¯¯å¤„ç†è¾¹ç•Œ123&lt;error-boundary&gt; &lt;another-component/&gt;&lt;/error-boundary&gt; 1234567891011121314Vue.component(&apos;ErrorBoundary&apos;, &#123; data: () =&gt; (&#123; error: null &#125;), errorCaptured (err, vm, info) &#123; this.error = `$&#123;err.stack&#125;\\n\\nfound in $&#123;info&#125; of component` return false &#125;, render (h) &#123; if (this.error) &#123; return h(&apos;pre&apos;, &#123; style: &#123; color: &apos;red&apos; &#125;&#125;, this.error) &#125; // ignoring edge cases for the sake of demonstration return this.$slots.default[0] &#125;&#125;) æ­£æ–‡copy åŠå¤©å®˜ç½‘æ–‡æ¡£ï¼Œä½ æ˜¯copyå¿è€…å—â˜ºï¼Œå„ä½çœ‹å®˜è€çˆ·ï¼Œè¯·å¾€ä¸‹é¢çœ‹ï¼Œæ³¨æ„è‡ªå·±ä½¿ç”¨æ—¶çš„Vueç‰ˆæœ¬ï¼Œé¿å…erræŠ“å–ä¸åˆ°ğŸ–¤ è§£è¯»error.jsæºç Vue æºç ä¸­ï¼Œå¼‚å¸¸å¤„ç†çš„é€»è¾‘æ”¾åœ¨ /src/core/util/error.js ä¸­ handleErrorã€globalHandleErrorã€invokeWithErrorHandlingã€logError handleErroråœ¨éœ€è¦æ•è·å¼‚å¸¸çš„åœ°æ–¹è°ƒç”¨ã€‚é¦–å…ˆè·å–åˆ°æŠ¥é”™çš„ç»„ä»¶ï¼Œä¹‹åé€’å½’æŸ¥æ‰¾å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶ï¼Œä¾æ¬¡è°ƒç”¨errorCaptured æ–¹æ³•ã€‚åœ¨éå†è°ƒç”¨å®Œæ‰€æœ‰ errorCaptured æ–¹æ³•ã€æˆ– errorCaptured æ–¹æ³•æœ‰æŠ¥é”™æ—¶ï¼Œè°ƒç”¨ globalHandleError æ–¹æ³• globalHandleErrorè°ƒç”¨å…¨å±€çš„ errorHandler æ–¹æ³•ï¼Œå¦‚æœ errorHandler æ–¹æ³•è‡ªå·±åˆæŠ¥é”™äº†å‘¢ï¼Ÿç”Ÿäº§ç¯å¢ƒä¸‹ä¼šä½¿ç”¨ console.error åœ¨æ§åˆ¶å°ä¸­è¾“å‡º invokeWithErrorHandlingæ›´å¥½çš„å¼‚æ­¥é”™è¯¯å¤„ç†ï¼Œå½“æ—¶å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œgit historyæ˜¾ç¤ºå°å³å“¥ï¼Œä¸€å‘¨ä¹‹å‰æ•²çš„ä»£ç ï¼Œç¬é—´é€å¿ƒå‡‰ï¼Œå¿ƒé£æ‰¬ logErroråˆ¤æ–­ç¯å¢ƒï¼Œé€‰æ‹©ä¸åŒçš„æŠ›é”™æ–¹å¼ã€‚éç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œè°ƒç”¨warnæ–¹æ³•å¤„ç†é”™è¯¯ errorCaptured å’Œ errorHandler çš„è§¦å‘æ—¶æœºéƒ½æ˜¯ç›¸åŒçš„ï¼Œä¸åŒçš„æ˜¯ errorCaptured å‘ç”Ÿåœ¨å‰ï¼Œä¸”å¦‚æœæŸä¸ªç»„ä»¶çš„ errorCaptured æ–¹æ³•è¿”å›äº† falseï¼Œé‚£ä¹ˆè¿™ä¸ªå¼‚å¸¸ä¿¡æ¯ä¸ä¼šå†å‘ä¸Šå†’æ³¡ä¹Ÿä¸ä¼šå†è°ƒç”¨ errorHandler æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113/* @flow */# Vue å…¨å±€é…ç½®,ä¹Ÿå°±æ˜¯ä¸Šé¢çš„Vue.configimport config from &apos;../config&apos;import &#123; warn &#125; from &apos;./debug&apos;# åˆ¤æ–­ç¯å¢ƒimport &#123; inBrowser, inWeex &#125; from &apos;./env&apos;# åˆ¤æ–­æ˜¯å¦æ˜¯Promiseï¼Œé€šè¿‡val.then === &apos;function&apos; &amp;&amp; val.catch === &apos;function&apos;, val ï¼=== null &amp;&amp; val !== undefinedimport &#123; isPromise &#125; from &apos;shared/util&apos;# å½“é”™è¯¯å‡½æ•°å¤„ç†é”™è¯¯æ—¶ï¼Œåœç”¨depsè·Ÿè¸ªä»¥é¿å…å¯èƒ½å‡ºç°çš„infinite rendering# è§£å†³ä»¥ä¸‹å‡ºç°çš„é—®é¢˜https://github.com/vuejs/vuex/issues/1505çš„é—®é¢˜import &#123; pushTarget, popTarget &#125; from &apos;../observer/dep&apos;export function handleError (err: Error, vm: any, info: string) &#123; // Deactivate deps tracking while processing error handler to avoid possible infinite rendering. pushTarget() try &#123; # vmæŒ‡å½“å‰æŠ¥é”™çš„ç»„ä»¶å®ä¾‹ if (vm) &#123; let cur = vm # é¦–å…ˆè·å–åˆ°æŠ¥é”™çš„ç»„ä»¶ï¼Œä¹‹åé€’å½’æŸ¥æ‰¾å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶ï¼Œä¾æ¬¡è°ƒç”¨errorCaptured æ–¹æ³•ã€‚ # åœ¨éå†è°ƒç”¨å®Œæ‰€æœ‰ errorCaptured æ–¹æ³•ã€æˆ– errorCaptured æ–¹æ³•æœ‰æŠ¥é”™æ—¶ï¼Œè°ƒç”¨ globalHandleError æ–¹æ³• while ((cur = cur.$parent)) &#123; const hooks = cur.$options.errorCaptured # åˆ¤æ–­æ˜¯å¦å­˜åœ¨errorCapturedé’©å­å‡½æ•° if (hooks) &#123; # é€‰é¡¹åˆå¹¶çš„ç­–ç•¥ï¼Œé’©å­å‡½æ•°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ for (let i = 0; i &lt; hooks.length; i++) &#123; # å¦‚æœerrorCaptured é’©å­æ‰§è¡Œè‡ªèº«æŠ›å‡ºäº†é”™è¯¯ï¼Œ # åˆ™ç”¨try&#123;&#125;catch&#123;&#125;æ•è·é”™è¯¯ï¼Œå°†è¿™ä¸ªæ–°é”™è¯¯å’ŒåŸæœ¬è¢«æ•è·çš„é”™è¯¯éƒ½ä¼šå‘é€ç»™å…¨å±€çš„config.errorHandler # è°ƒç”¨globalHandleErroræ–¹æ³• try &#123; # å½“å‰errorCapturedæ‰§è¡Œï¼Œæ ¹æ®è¿”å›æ˜¯å¦æ˜¯falseå€¼ # æ˜¯falseï¼Œcapture = trueï¼Œé˜»æ­¢å…¶å®ƒä»»ä½•ä¼šè¢«è¿™ä¸ªé”™è¯¯å”¤èµ·çš„ errorCaptured é’©å­å’Œå…¨å±€çš„ config.errorHandler # æ˜¯true capture = faleï¼Œç»„ä»¶çš„ç»§æ‰¿æˆ–çˆ¶çº§ä»å±é“¾è·¯ä¸­å­˜åœ¨çš„å¤šä¸ª errorCaptured é’©å­ï¼Œä¼šè¢«ç›¸åŒçš„é”™è¯¯é€ä¸ªå”¤èµ· # è°ƒç”¨å¯¹åº”çš„é’©å­å‡½æ•°ï¼Œå¤„ç†é”™è¯¯ const capture = hooks[i].call(cur, err, vm, info) === false if (capture) return &#125; catch (e) &#123; globalHandleError(e, cur, &apos;errorCaptured hook&apos;) &#125; &#125; &#125; &#125; &#125; # é™¤éç¦æ­¢é”™è¯¯å‘ä¸Šä¼ æ’­ï¼Œå¦åˆ™éƒ½ä¼šè°ƒç”¨å…¨å±€çš„é”™è¯¯å¤„ç†å‡½æ•° globalHandleError(err, vm, info) &#125; finally &#123; popTarget() &#125;&#125;# å¼‚æ­¥é”™è¯¯å¤„ç†å‡½æ•°export function invokeWithErrorHandling ( handler: Function, context: any, args: null | any[], vm: any, info: string) &#123; let res try &#123; # æ ¹æ®å‚æ•°é€‰æ‹©ä¸åŒçš„handleæ‰§è¡Œæ–¹å¼ res = args ? handler.apply(context, args) : handler.call(context) # handleè¿”å›ç»“æœå­˜åœ¨ # res._isVue an flag to avoid this being observedï¼Œå¦‚æœä¼ å…¥å€¼çš„_isVueä¸ºtureæ—¶(å³ä¼ å…¥çš„å€¼æ˜¯Vueå®ä¾‹æœ¬èº«)ä¸ä¼šæ–°å»ºobserverå®ä¾‹ # isPromise(res) åˆ¤æ–­val.then === &apos;function&apos; &amp;&amp; val.catch === &apos;function&apos;, val ï¼=== null &amp;&amp; val !== undefined # !res._handled _handleæ˜¯Promise å®ä¾‹çš„å†…éƒ¨å˜é‡ä¹‹ä¸€ï¼Œé»˜è®¤æ˜¯falseï¼Œä»£è¡¨onFulfilled,onRejectedæ˜¯å¦è¢«å¤„ç† if (res &amp;&amp; !res._isVue &amp;&amp; isPromise(res) &amp;&amp; !res._handled) &#123; res.catch(e =&gt; handleError(e, vm, info + ` (Promise/async)`)) # avoid catch triggering multiple times when nested calls # é¿å…åµŒå¥—è°ƒç”¨æ—¶catchå¤šæ¬¡çš„è§¦å‘ res._handled = true &#125; &#125; catch (e) &#123; # å¤„ç†æ‰§è¡Œé”™è¯¯ handleError(e, vm, info) &#125; return res&#125;#å…¨å±€é”™è¯¯å¤„ç†function globalHandleError (err, vm, info) &#123; # è·å–å…¨å±€é…ç½®ï¼Œåˆ¤æ–­æ˜¯å¦è®¾ç½®å¤„ç†å‡½æ•°ï¼Œé»˜è®¤undefined # å·²é…ç½® if (config.errorHandler) &#123; # try&#123;&#125;catch&#123;&#125; ä½å…¨å±€é”™è¯¯å¤„ç†å‡½æ•° try &#123; # æ‰§è¡Œè®¾ç½®çš„å…¨å±€é”™è¯¯å¤„ç†å‡½æ•°ï¼Œhandle error æƒ³å¹²å•¥å°±å¹²å•¥ğŸ’— return config.errorHandler.call(null, err, vm, info) &#125; catch (e) &#123; # å¦‚æœå¼€å‘è€…åœ¨errorHandlerå‡½æ•°ä¸­æ‰‹åŠ¨æŠ›å‡ºåŒæ ·é”™è¯¯ä¿¡æ¯throw err # åˆ¤æ–­errä¿¡æ¯æ˜¯å¦ç›¸ç­‰ï¼Œé¿å…logä¸¤æ¬¡ # å¦‚æœæŠ›å‡ºæ–°çš„é”™è¯¯ä¿¡æ¯throw err Error(&apos;ä½ å¥½æ¯’&apos;)ï¼Œå°†ä¼šä¸€èµ·logè¾“å‡º if (e !== err) &#123; logError(e, null, &apos;config.errorHandler&apos;) &#125; &#125; &#125; # æœªé…ç½®å¸¸è§„logè¾“å‡º logError(err, vm, info)&#125;# é”™è¯¯è¾“å‡ºå‡½æ•°function logError (err, vm, info) &#123; if (process.env.NODE_ENV !== &apos;production&apos;) &#123; warn(`Error in $&#123;info&#125;: &quot;$&#123;err.toString()&#125;&quot;`, vm) &#125; /* istanbul ignore else */ if ((inBrowser || inWeex) &amp;&amp; typeof console !== &apos;undefined&apos;) &#123; console.error(err) &#125; else &#123; throw err &#125;&#125; æ¬¢ä¹æ—¶å…‰ä»¥ä¸Šæ˜¯æœ¬äººå¯¹vue é”™è¯¯å¤„ç†çš„æµ…æ˜¾ç†è§£ï¼Œæ¬¢è¿å¤§å®¶äº¤æµï¼Œå…±åŒè¿›æ­¥!","categories":[{"name":"Vue","slug":"Vue","permalink":"http://yoursite.com/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://yoursite.com/tags/Vue/"}]},{"title":"Webpack DllPlugin è®©æ„å»ºé€Ÿåº¦æŸ”é¡ºä¸æ»‘","slug":"webpackDLL","date":"2019-03-13T03:30:49.116Z","updated":"2019-03-24T23:55:37.857Z","comments":true,"path":"2019/03/13/webpackDLL/","link":"","permalink":"http://yoursite.com/2019/03/13/webpackDLL/","excerpt":"","text":"æ¦‚å¿µDLLPlugin å’Œ DLLReferencePlugin ç”¨æŸç§æ–¹æ³•å®ç°äº†æ‹†åˆ† bundlesï¼ŒåŒæ—¶è¿˜å¤§å¤§æå‡äº†æ„å»ºçš„é€Ÿåº¦,å°†åŒ…å«å¤§é‡å¤ç”¨æ¨¡å—ä¸”ä¸ä¼šé¢‘ç¹æ›´æ–°çš„åº“è¿›è¡Œç¼–è¯‘ï¼Œåªéœ€è¦ç¼–è¯‘ä¸€æ¬¡ï¼Œç¼–è¯‘å®Œæˆåå­˜åœ¨æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚åœ¨ä¹‹åçš„æ„å»ºè¿‡ç¨‹ä¸­ä¸ä¼šå†å¯¹è¿™äº›æ¨¡å—è¿›è¡Œç¼–è¯‘ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ DllReferencePlugin æ¥å¼•ç”¨åŠ¨æ€é“¾æ¥åº“çš„ä»£ç ã€‚ä¸€èˆ¬ä¼šå¯¹å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œä¾‹å¦‚ reactã€react-domã€lodash ç­‰ã€‚åªè¦è¿™äº›æ¨¡å—ä¸å‡çº§æ›´æ–°ï¼Œè¿™äº›åŠ¨æ€é“¾æ¥åº“å°±ä¸éœ€è¦é‡æ–°ç¼–è¯‘ã€‚ æ‘˜è¦æœ¬æ–‡ä»‹ç»äº† Webpack ä¸­ DllPlugin æ’ä»¶çš„ä½¿ç”¨ï¼Œä»¥åŠé…åˆä½¿ç”¨ AddAssetHtmlPlugin æˆ–è€… HtmlWebpackIncludeAssetsPlugin å°†æ„å»ºå¥½çš„ JS æ–‡ä»¶æ’å…¥åˆ° htmlé¡µé¢ä¸­ ä»£ç åœ°å€github: æºç æ¬¢è¿äº¤æµï¼ŒStarï¼ é¡¹ç›®ç›®å½•å¸¸è§„webpacké¡¹ç›®ï¼Œæ­å»ºè¿‡ç¨‹æœ¬æ–‡ç« ä¸åœ¨æè¿°1234567891011myreact|- /build |- webpack.config.js |- webpack.dll.conf.js|- /dist |- dll |- js|- /src |- index.js|- package.json|- index.html å…·ä½“é¡¹ç›®ç»“æ„ï¼Œè¯·çœ‹ä¸‹å›¾ ä¸‹é¢å¼€å§‹DLLä¹‹æ—…ä¸€.buildç›®å½•ä¸‹åˆ›å»ºwebpack.dll.conf.js(DLLPlugin)12345678910111213141516171819202122232425262728293031const webpack = require(&quot;webpack&quot;)const path = require(&apos;path&apos;)const CleanWebpaclPlugin = require(&apos;clean-webpack-plugin&apos;);const resolve = (dir) =&gt; path.join(__dirname, &apos;..&apos;, dir);module.exports = &#123; entry: &#123; # å°† reactã€lodashç­‰æ¨¡å—ä½œä¸ºå…¥å£ç¼–è¯‘æˆåŠ¨æ€é“¾æ¥åº“ vendor: [&apos;react&apos;, &apos;react-dom&apos;, &apos;react-router-dom&apos;, &apos;lodash&apos;] &#125;, output: &#123; # æŒ‡å®šç”Ÿæˆæ–‡ä»¶æ‰€åœ¨ç›®å½•æ–‡ä»¶å¤¹ï¼Œ # å°†å®ƒä»¬å­˜æ”¾åœ¨äº† src æ–‡ä»¶å¤¹ä¸‹ path: resolve(&apos;public&apos;), # æŒ‡å®šæ–‡ä»¶å library: &apos;_dll_[name]&apos;, # å­˜æ”¾åŠ¨æ€é“¾æ¥åº“çš„å…¨å±€å˜é‡åç§°ï¼Œä¾‹å¦‚å¯¹åº” lodash æ¥è¯´å°±æ˜¯ lodash_dll_lib # è¿™ä¸ªåç§°éœ€è¦ä¸ DllPlugin æ’ä»¶ä¸­çš„ name å±æ€§å€¼å¯¹åº”èµ·æ¥ filename: &apos;dll/_dll_[name].[hash].js&apos; &#125;, plugins: [ new CleanWebpaclPlugin([&apos;dll&apos;], &#123; root: resolve(&apos;public&apos;) &#125;), new webpack.DllPlugin(&#123; name: &apos;_dll_[name]&apos;, # å’Œoutput.libraryä¸­ä¸€è‡´ï¼Œå€¼å°±æ˜¯è¾“å‡ºçš„manifest.jsonä¸­çš„ nameå€¼ path: path.join(__dirname, &apos;../public/dll&apos;, &apos;[name].manifest.json&apos;) &#125;) ]&#125; äºŒ. åˆ›å»ºwebpack.base.conf.js ä½¿ç”¨ DllReferencePlugin123456789101112131415161718192021222324252627282930313233const path = require(&apos;path&apos;);const webpack = require(&apos;webpack&apos;);const HTMLWebpackPlugin = require(&apos;html-webpack-plugin&apos;);const CleanWebpaclPlugin = require(&apos;clean-webpack-plugin&apos;);const resolve = (dir) =&gt; path.join(__dirname, &apos;..&apos;, dir);module.exports = &#123; entry: &apos;./src/index.js&apos;, output: &#123; path: resolve(&apos;dist&apos;), filename: &apos;js/[name].[hash].js&apos;, library: &apos;_dll_[name]&apos; &#125;, plugins: [ # éœ€æ·»åŠ root å¦åˆ™æ— æ³•åˆ é™¤ï¼Œexcludeæœªç”Ÿæ•ˆ new CleanWebpackPlugin([&apos;dist&apos;], &#123; root: path.join(__dirname, &apos;..&apos;) &#125;), new HTMLWebpackPlugin(&#123; title: &apos;Webpak DllPlugin çš„ä½¿ç”¨&apos;, template: resolve(&apos;index.html&apos;), filename: &apos;index.html&apos; &#125;), new webpack.DefinePlugin(&#123; &apos;process.env.NODE_ENV&apos;: JSON.stringify(&apos;production&apos;) &#125;), # å‘Šè¯‰ Webpack ä½¿ç”¨åŠ¨æ€é“¾æ¥åº“ new webpack.DllReferencePlugin(&#123; // æè¿° lodash åŠ¨æ€é“¾æ¥åº“çš„æ–‡ä»¶å†…å®¹ manifest: require(../public/dll/vendor.manifest&apos;) &#125;) ]&#125; ä¸‰ã€åœ¨ index.html æ–‡ä»¶ä¸­å¼•å…¥åŠ¨æ€é“¾æ¥åº“ç”±äºåŠ¨æ€é“¾æ¥åº“æˆ‘ä»¬ä¸€èˆ¬åªç¼–è¯‘ä¸€æ¬¡ï¼Œé™¤éä¾èµ–çš„ä¸‰æ–¹åº“æ›´æ–°ï¼Œä¹‹åå°±ä¸ç”¨ç¼–è¯‘ï¼Œå› æ­¤å…¥å£çš„ index.js æ–‡ä»¶ä¸­ä¸åŒ…å«è¿™äº›æ¨¡å—ï¼Œæ‰€ä»¥è¦åœ¨ index.html ä¸­å•ç‹¬å¼•å…¥ã€‚ ä¸¤ç§æ–¹æ¡ˆ æ‰‹åŠ¨æ·»åŠ scriptï¼Œæ‰‹åŠ¨copyæ‰“åŒ…å¥½çš„dllæ–‡ä»¶å¤¹åˆ°distï¼Œéº»çƒ¦åå¤ï¼Œå¾ˆä¸çˆ½ ä½¿ç”¨add-asset-html-webpack-pluginæˆ–è€…html-webpack-include-assets-pluginæ’å…¥åˆ°htmlä¸­ï¼Œç®€å•è‡ªåŠ¨åŒ–ï¼Œç¾æ»‹æ»‹ æ‰€ä»¥æˆ‘ä»¬è‚¯å®šä¼šé‡‡ç”¨ç¬¬äºŒç§æ–¹å¼ï¼Œä¸‹é¢ç€é‡è®²ä¸‹add-asset-html-webpack-pluginä¸html-webpack-include-assets-pluginæ’ä»¶çš„ä½¿ç”¨ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨add-asset-html-webpack-plugin å®‰è£…å¤§åŒå°å¼‚12npm install add-asset-html-webpack-plugin -Dnpm install html-webpack-include-assets-plugin -D ä½¿ç”¨ä¹Ÿæœ‰ç›¸ä¼¼çš„åœ°æ–¹webpack.base.conf.js æ–‡ä»¶ä¸­è¿›è¡Œä½¿ç”¨1234567891011121314151617181920# add-asset-html-webpack-plugin...;const AddAssetHtmlPlugin = require(&apos;add-asset-html-webpack-plugin&apos;);module.exports = &#123; ..., plugins: [ ..., # ç»™å®šçš„ JS æˆ– CSS æ–‡ä»¶æ·»åŠ åˆ° webpack é…ç½®çš„æ–‡ä»¶ä¸­ï¼Œå¹¶å°†å…¶æ”¾å…¥èµ„æºåˆ—è¡¨ html webpackæ’ä»¶æ³¨å…¥åˆ°ç”Ÿæˆçš„ html ä¸­ã€‚ new AddAssetHtmlPlugin([ &#123; # è¦æ·»åŠ åˆ°ç¼–è¯‘ä¸­çš„æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ filepath: path.resolve(__dirname,&apos;../public/dll/_dll_vendor.js&apos;), outputPath: &apos;dll&apos;, publicPath: &apos;dll&apos;, includeSourcemap: false &#125; ]) ]&#125; 1234567891011121314151617# html-webpack-include-assets-plugin...;const HtmlWebpackIncludeAssetsPlugin = require(&apos;html-webpack-include-assets-plugin&apos;);module.exports = &#123; ..., plugins: [ ..., # ç»™å®šçš„ JS æˆ– CSS æ–‡ä»¶æ·»åŠ åˆ° webpack é…ç½®çš„æ–‡ä»¶ä¸­ï¼Œå¹¶å°†å…¶æ”¾å…¥èµ„æºåˆ—è¡¨ html webpackæ’ä»¶æ³¨å…¥åˆ°ç”Ÿæˆçš„ html ä¸­ã€‚ new HtmlWebpackIncludeAssetsPlugin([ &#123; assets: [&apos;dll/_dll_vendor.js&apos;], append: false &#125; ]) ]&#125; ä¸¤è€…åŒºåˆ« index.html12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;çˆ±ä½ çš„ä¸€åªçŒ«å“ˆå“ˆå“ˆ1111&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&apos;root&apos;&gt;&lt;/div&gt;&lt;/html&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;dll/_dll_vendor.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;/js/runtime.830efec54753fd6ed91b.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;/js/vendors.830efec54753fd6ed91b.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;/js/app.830efec54753fd6ed91b.js&quot;&gt;&lt;/script&gt; è¿è¡Œé¡¹ç›®1npm run build æŸ¥çœ‹distæ–‡ä»¶ä¸‹çš„æ–‡ä»¶ ç›¸å…³æ–‡æ¡£webpack ä¸­æ–‡","categories":[{"name":"å‰ç«¯å­¦ä¹ ","slug":"å‰ç«¯å­¦ä¹ ","permalink":"http://yoursite.com/categories/å‰ç«¯å­¦ä¹ /"}],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"http://yoursite.com/tags/Webpack/"}]},{"title":"leetcode ä¸¤æ•°ä¹‹å’Œ/ä¸¤æ•°ç›¸åŠ ","slug":"leetCode/ä¸¤æ•°ç›¸åŠ å’Œä¸¤æ•°ä¹‹å’Œ","date":"2019-03-11T08:28:34.445Z","updated":"2019-03-26T05:55:54.056Z","comments":true,"path":"2019/03/11/leetCode/ä¸¤æ•°ç›¸åŠ å’Œä¸¤æ•°ä¹‹å’Œ/","link":"","permalink":"http://yoursite.com/2019/03/11/leetCode/ä¸¤æ•°ç›¸åŠ å’Œä¸¤æ•°ä¹‹å’Œ/","excerpt":"","text":"æ¦‚è¦å‰ç«¯å¯¹ç®—æ³•çš„éœ€æ±‚ä¸€ç›´æ˜¯æœ€å°‘çš„ï¼Œæ¥è§¦çš„æ— éæ˜¯ä¸€äº›å†’æ³¡æ’åºä¹‹ç±»çš„ç®€å•ç®—æ³•ï¼Œæœ€è¿‘é¢è¯•æ„Ÿè§¦è‰¯å¤šï¼Œä¸è¯´é¢è¯•ç®—æ³•å·²ç»æ˜¯å¿…è€ƒçš„é¢˜ç›®ï¼Œå°±è¯´èƒ½å¤ŸåŠ æ·±å¯¹Jsçš„ç†è§£ï¼Œä¹Ÿæ˜¯è¦ä»”ç»†çœ‹ä¸‹ç«‹ä¸ªflagï¼Œå¯¹leetcode Jsåˆ·é¢˜ï¼Œä¼°è®¡ä¹‹åä¼šå†ç”¨GoLangèµ°ä¸€é ä¸¤æ•°ä¹‹å’Œç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å’Œä¸ºç›®æ ‡å€¼çš„ä¸¤ä¸ªæ•°ã€‚ä½ å¯ä»¥å‡è®¾æ¯ä¸ªè¾“å…¥åªå¯¹åº”ä¸€ç§ç­”æ¡ˆï¼Œä¸”åŒæ ·çš„å…ƒç´ ä¸èƒ½è¢«é‡å¤åˆ©ç”¨123ç»™å®š nums = [2, 7, 11, 15], target = 9å› ä¸º nums[0] + nums[1] = 2 + 7 = 9æ‰€ä»¥è¿”å› [0, 1] ç›´è§‚æš´åŠ›è§£æ³•ï¼ŒåŒé‡å¾ªç¯1234567891011121314/** * @param &#123;number[]&#125; nums * @param &#123;number&#125; target * @return &#123;number[]&#125; */var twoSum = function(nums, target) &#123; for (var i = 0; i &lt; nums.length; i++) &#123; for (var j = i+1; j &lt; nums.length; j++) &#123; if (nums[i] + nums[j] === target) &#123; return [i, j] &#125; &#125; &#125;&#125;; å­—å…¸æŸ¥æ‰¾æ•´ä¸ªå®ç°æ­¥éª¤ä¸ºï¼šå…ˆéå†ä¸€éæ•°ç»„ï¼Œå»ºç«‹mapæ•°æ®ï¼Œç„¶åå†éå†ä¸€éï¼Œå¼€å§‹æŸ¥æ‰¾ï¼Œæ‰¾åˆ°åˆ™è®°å½•indexã€‚ä»£ç å¦‚ä¸‹ï¼š12345678910var twoSum = function(nums, target) &#123; let m = &#123;&#125;; for (var i = 0; i &lt; nums.length; i++) &#123; let tmp = target - nums[i] if (m[tmp] !== undefined) &#123; return [m[tmp], i] &#125; m[nums[i]] = i &#125;&#125;; ä¸¤æ•°ç›¸åŠ ç»™å®šä¸¤ä¸ªéç©ºé“¾è¡¨æ¥è¡¨ç¤ºä¸¤ä¸ªéè´Ÿæ•´æ•°ã€‚ä½æ•°æŒ‰ç…§é€†åºæ–¹å¼å­˜å‚¨ï¼Œå®ƒä»¬çš„æ¯ä¸ªèŠ‚ç‚¹åªå­˜å‚¨å•ä¸ªæ•°å­—ã€‚å°†ä¸¤æ•°ç›¸åŠ è¿”å›ä¸€ä¸ªæ–°çš„é“¾è¡¨ã€‚ ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°å­—éƒ½ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚ 123è¾“å…¥ï¼š(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)è¾“å‡ºï¼š7 -&gt; 0 -&gt; 8åŸå› ï¼š342 + 465 = 807 è¿™é“é¢˜ä¸»è¦è€ƒå¯Ÿè¿æ¥ç»“æ„ï¼Œå¯¹é“¾è¡¨ç»“æ„å¹¶ä¸ç†Ÿæ‚‰ï¼Œæ‰€ä»¥æƒ³èµ·æ¥æœ‰é—®é¢˜ï¼Œä¸‹é¢çš„è§£æ³•æœ‰ç”¨çš„ä½è¿ç®—ç¬¦ç­‰1234567891011121314151617181920212223242526272829303132333435var addTwoNumbers = function(l1, l2) &#123; var add = 0 , ans , head; while(l1 || l2) &#123; var a = l1 ? l1.val : 0 , b = l2 ? l2.val : 0; var sum = a + b + add; add = ~~(sum / 10); var node = new ListNode(sum % 10); if (!ans) ans = head = node; else &#123; head.next = node; head = node; &#125; if (l1) l1 = l1.next; if (l2) l2 = l2.next; &#125; if (add) &#123; var node = new ListNode(add); head.next = node; head = node; &#125; return ans;&#125;;","categories":[{"name":"ç®—æ³•ã€æ•°æ®","slug":"ç®—æ³•ã€æ•°æ®","permalink":"http://yoursite.com/categories/ç®—æ³•ã€æ•°æ®/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://yoursite.com/tags/Vue/"}]},{"title":"leetcode æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²","slug":"leetCode/æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²","date":"2019-03-11T07:24:38.612Z","updated":"2019-03-26T05:56:20.133Z","comments":true,"path":"2019/03/11/leetCode/æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²/","link":"","permalink":"http://yoursite.com/2019/03/11/leetCode/æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²/","excerpt":"","text":"æ¦‚è¦å®šä¹‰ä¸¤ä¸ªå˜é‡reså’Œleftï¼Œå…¶ä¸­resç”¨æ¥è®°å½•æœ€é•¿æ— é‡å¤å­ä¸²çš„é•¿åº¦ï¼ŒleftsæŒ‡å‘è¯¥æ— é‡å¤å­ä¸²å·¦è¾¹çš„èµ·å§‹ä½ç½®ï¼Œç„¶åæˆ‘ä»¬éå†æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹äºæ¯ä¸€ä¸ªéå†åˆ°çš„å­—ç¬¦ï¼Œå¦‚æœå“ˆå¸Œè¡¨ä¸­è¯¥å­—ç¬¦ä¸²å¯¹åº”çš„å€¼ä¸º0ï¼Œè¯´æ˜æ²¡æœ‰é‡åˆ°è¿‡è¯¥å­—ç¬¦ï¼Œåˆ™æ­¤æ—¶è®¡ç®—æœ€é•¿æ— é‡å¤å­ä¸²ï¼Œi - left +ï¼‘ï¼Œå…¶ä¸­ï½‰æ˜¯æœ€é•¿æ— é‡å¤å­ä¸²æœ€å³è¾¹çš„ä½ç½®ï¼Œleftæ˜¯æœ€å·¦è¾¹çš„ä½ç½®ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µä¹Ÿéœ€è¦è®¡ç®—æœ€é•¿æ— é‡å¤å­ä¸²ï¼Œå°±æ˜¯å½“å“ˆå¸Œè¡¨ä¸­çš„å€¼å°äºleftï¼Œè¿™æ˜¯ç”±äºæ­¤æ—¶å‡ºç°è¿‡é‡å¤çš„å­—ç¬¦ï¼Œleftçš„ä½ç½®æ›´æ–°äº†ï¼Œå¦‚æœåˆé‡åˆ°äº†æ–°çš„å­—ç¬¦ï¼Œå°±è¦é‡æ–°è®¡ç®—æœ€é•¿æ— é‡å¤å­ä¸²ã€‚æœ€åæ¯æ¬¡éƒ½è¦åœ¨å“ˆå¸Œè¡¨ä¸­å°†å½“å‰å­—ç¬¦å¯¹åº”çš„å€¼èµ‹å€¼ä¸ºi+1 æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºä¸å«æœ‰é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚12345ç»™å®š &quot;abcabcbb&quot; ï¼Œæ²¡æœ‰é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;abc&quot; ï¼Œé‚£ä¹ˆé•¿åº¦å°±æ˜¯3ã€‚ç»™å®š &quot;bbbbb&quot; ï¼Œæœ€é•¿çš„å­ä¸²å°±æ˜¯ &quot;b&quot; ï¼Œé•¿åº¦æ˜¯1ã€‚ç»™å®š &quot;pwwkew&quot; ï¼Œæœ€é•¿å­ä¸²æ˜¯ &quot;wke&quot; ï¼Œé•¿åº¦æ˜¯3ã€‚è¯·æ³¨æ„ç­”æ¡ˆå¿…é¡»æ˜¯ä¸€ä¸ªå­ä¸²ï¼Œ&quot;pwke&quot; æ˜¯ å­åºåˆ— è€Œä¸æ˜¯å­ä¸²ã€‚ è§£æ³•ä¸€12345678910111213141516171819202122232425262728/** * @param &#123;string&#125; s * @return &#123;number&#125; */ var lengthOfLongestSubstring = function(s) &#123; let hash = &#123;&#125; let start = 0 let ans = 0 for (var i = 0; i &lt; s.length; i++)&#123; let item = s[i] if (!hash[item]) &#123; hash[item] = true &#125; else &#123; for (;;) &#123; if (s[start] === item) &#123; start++; break; &#125; hash[s[start]] = false start++ &#125; &#125; ans = Math.max(ans, i - start + 1) &#125; return ans &#125; è§£æ³•äºŒ123456789101112var lengthOfLongestSubstring = function(s) &#123; var res = 0 var left = -1 var m = [] m.fill(-1) for (var i = 0; i &lt; s.length; i++) &#123; left = Math.max(left, m[s.charAt(i)]) m[s.charAt[i]] = i res = Math.max(res, i - left) &#125; return res&#125; è§£æ³•ä¸‰ä¸‹é¢è¿™ç§è§£æ³•ä½¿ç”¨äº†setï¼Œæ ¸å¿ƒç®—æ³•å’Œä¸Šé¢çš„å¾ˆç±»ä¼¼ï¼ŒæŠŠå‡ºç°è¿‡çš„å­—ç¬¦éƒ½æ”¾å…¥setä¸­ï¼Œé‡åˆ°setä¸­æ²¡æœ‰çš„å­—ç¬¦å°±åŠ å…¥setä¸­å¹¶æ›´æ–°ç»“æœresï¼Œå¦‚æœé‡åˆ°é‡å¤çš„ï¼Œåˆ™ä»å·¦è¾¹å¼€å§‹åˆ å­—ç¬¦ï¼Œç›´åˆ°åˆ åˆ°é‡å¤çš„å­—ç¬¦åœæ­¢ï¼š123456789101112131415var lengthOfLongestSubstring = function(s) &#123; var res = 0 var left = 0 var right = 0 var t = new Set() while (right &lt; s.length)&#123; if (!t.has(s.charAt(right))) &#123; t.add(s.charAt(right++)) res = Math.max(res, t.size) &#125; else &#123; t.delete(s.charAt(left++)) &#125; &#125; return res&#125; ä¸¤ä¸ªæ’åºæ•°ç»„çš„ä¸­ä½æ•°ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æœ‰åºæ•°ç»„ nums1 å’Œ nums2 ã€‚è¯·æ‰¾å‡ºè¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ã€‚è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(log (m+n))ç¤ºä¾‹ï¼š1234nums1 = [1, 3]nums2 = [2]ä¸­ä½æ•°æ˜¯ 2.0 123nums1 = [1, 2]nums2 = [3, 4]ä¸­ä½æ•°æ˜¯ (2 + 3)/2 = 2.5 è§£é¢˜æ€è·¯è¿™é“é¢˜è®©æˆ‘ä»¬æ±‚ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œè€Œä¸”é™åˆ¶äº†æ—¶é—´å¤æ‚åº¦ä¸ºO(log (m+n))ï¼Œçœ‹åˆ°è¿™ä¸ªæ—¶é—´å¤æ‚åº¦ï¼Œè‡ªç„¶è€Œç„¶çš„æƒ³åˆ°äº†åº”è¯¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•æ¥æ±‚è§£ã€‚ä½†æ˜¯è¿™é“é¢˜è¢«å®šä¹‰ä¸ºHardä¹Ÿæ˜¯æœ‰å…¶åŸå› çš„ï¼Œéš¾å°±éš¾åœ¨è¦åœ¨ä¸¤ä¸ªæœªåˆå¹¶çš„æœ‰åºæ•°ç»„ä¹‹é—´ä½¿ç”¨äºŒåˆ†æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥æ‰¾åˆ°ç¬¬Kä¸ªå…ƒç´ ï¼Œç”±äºä¸¤ä¸ªæ•°ç»„é•¿åº¦ä¹‹å’Œçš„å¥‡å¶ä¸ç¡®å®šï¼Œå› æ­¤éœ€è¦åˆ†æƒ…å†µæ¥è®¨è®ºï¼Œå¯¹äºå¥‡æ•°çš„æƒ…å†µï¼Œç›´æ¥æ‰¾åˆ°æœ€ä¸­é—´çš„æ•°å³å¯ï¼Œå¶æ•°çš„è¯éœ€è¦æ±‚æœ€ä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚ä¸‹é¢é‡ç‚¹æ¥çœ‹å¦‚ä½•å®ç°æ‰¾åˆ°ç¬¬Kä¸ªå…ƒç´ ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦è®©æ•°ç»„1çš„é•¿åº¦å°äºæˆ–ç­‰äºæ•°ç»„2çš„é•¿åº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€åˆ¤æ–­å¦‚æœæ•°ç»„1çš„é•¿åº¦å¤§äºæ•°ç»„2çš„é•¿åº¦çš„è¯ï¼Œäº¤æ¢ä¸¤ä¸ªæ•°ç»„å³å¯ï¼Œç„¶åæˆ‘ä»¬è¦åˆ¤æ–­å°çš„æ•°ç»„æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºçš„è¯ï¼Œç›´æ¥åœ¨å¦ä¸€ä¸ªæ•°ç»„æ‰¾ç¬¬Kä¸ªå³å¯ã€‚è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯å½“K = 1æ—¶ï¼Œè¡¨ç¤ºæˆ‘ä»¬è¦æ‰¾ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåªè¦æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›è¾ƒå°çš„é‚£ä¸ªå³å¯ã€‚ è§£æ³•ä¸€12345678910var findMedianSortedArrays = function(nums1, nums2) &#123; var s = nums1.concat(nums2); s.sort(function(a, b) &#123; return a - b; &#125;); var len = s.length; if (len &amp; 1) return s[~~(len / 2)]; else return (s[len / 2 - 1] + s[len / 2]) / 2;&#125;; è§£æ³•äºŒæ­¤é¢˜è¿˜èƒ½ç”¨äºŒåˆ†æœç´¢æ³•æ¥è§£ï¼Œæ˜¯ä¸€ç§ç›¸å½“å·§å¦™çš„åº”ç”¨ï¼Œè®²è§£åœ¨è¿™ä¸ªå¸–å­ä¸­å†™çš„ååˆ†æ¸…æ¥šï¼Œç­‰æœ‰æ—¶é—´æˆ‘å†æ¥å†™å†™åˆ†æè¿‡ç¨‹ï¼š123456789101112131415161718192021222324252627var findMedianSortedArrays = function(nums1, nums2) &#123; var m = nums1.length; var n = nums2.length; if (m &lt; n) &#123; return findMedianSortedArrays(nums2, nums1) &#125; if (n == 0) &#123; return (nums1[(m - 1) / 2] + nums1[m / 2]) / 2.0 &#125; var left = 0, right = 2 * n while (left &lt;= right) &#123; var mid2 = (left + right) / 2; var mid1 = m + n - mid2; var L1 = mid1 == 0 ? 0 : nums1[(mid1 - 1) / 2]; var L2 = mid2 == 0 ? 0 : nums2[(mid2 - 1) / 2]; var R1 = mid1 == m * 2 ? 0 : nums1[mid1 / 2]; var R2 = mid2 == n * 2 ? 0 : nums2[mid2 / 2]; if (L1 &gt; R2) &#123; left = mid2 + 1; &#125;else if (L2 &gt; R1) &#123; right = mid2 - 1; &#125;else &#123; return (Math.max(L1, L2) + Math.min(R1, R2)) / 2; &#125; &#125;&#125;;","categories":[{"name":"ç®—æ³•ã€æ•°æ®","slug":"ç®—æ³•ã€æ•°æ®","permalink":"http://yoursite.com/categories/ç®—æ³•ã€æ•°æ®/"}],"tags":[{"name":"leetcode","slug":"leetcode","permalink":"http://yoursite.com/tags/leetcode/"}]},{"title":"node å®ç°å›¾ç‰‡åˆæˆ","slug":"nodeå›¾ç‰‡åˆæˆä½ å¯ä»¥åšåˆ°","date":"2018-12-10T08:24:47.007Z","updated":"2019-03-11T08:27:44.421Z","comments":true,"path":"2018/12/10/nodeå›¾ç‰‡åˆæˆä½ å¯ä»¥åšåˆ°/","link":"","permalink":"http://yoursite.com/2018/12/10/nodeå›¾ç‰‡åˆæˆä½ å¯ä»¥åšåˆ°/","excerpt":"","text":"node å®ç°å›¾ç‰‡æ“ä½œåœ¨ä¸€ä¸ªå¶ç„¶çš„ä¸‹åˆï¼Œæˆ‘å‘ç°æŸåŸåŒå­¦åˆ©ç”¨canvas æµè§ˆå™¨ç«¯åˆæˆå›¾ç‰‡çš„é¡¹ç›®ï¼Œé‡åˆ°æ€§èƒ½ä¼˜åŒ–çš„éœ€æ±‚ï¼Œæˆ‘è§‰å¾—åç«¯å›¾ç‰‡åˆæˆå¯ä»¥è§£å†³æµè§ˆå™¨åˆæˆå›¾ç‰‡å»¶è¿Ÿé—®é¢˜ï¼Œå› æ­¤å°±ç§ä¸‹è°ƒç ”äº†å…³äºnodeå›¾ç‰‡åˆæˆç›¸å…³çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹æ¯”è¾ƒæµè¡Œçš„è§£å†³æ–¹æ¡ˆã€‚ ç›®å‰æµè¡Œçš„æŠ€æœ¯ åˆ©ç”¨gmåº“å®ç°å›¾ç‰‡çš„å‹ç¼©ï¼Œåˆæˆç­‰ã€‚ åˆ©ç”¨node-canvaså®ç°nodeç«¯çš„canvasç»˜å›¾ã€‚ å…ˆè¯´ä¸€ä¸‹ç¬¬ä¸€ç§ï¼Œä¹Ÿå°±æ˜¯ä»Šå¤©è¦ä»‹ç»çš„ä¸»è§’ï¼Œè½»é‡æ— ç—›è€ç‰Œé¡ºæ‰‹ï¼Œå€¼å¾—ç å†œé’çã€‚ç¬¬äºŒç§ä¸‹æ¬¡ä»‹ç»ï¼Œä¸»è¦æ˜¯canvasæŠ€æœ¯åº”ç”¨ã€‚ gmå°±æ˜¯GraphicsMagick+ImageMagickã€‚ ä½•ä¸ºGraphicsMagickï¼Ÿ GraphicsMagickå·ç§°å›¾åƒå¤„ç†é¢†åŸŸçš„ç‘å£«å†›åˆ€ã€‚ çŸ­å°ç²¾æ‚çš„ä»£ç å´æä¾›äº†ä¸€ä¸ªé²æ£’ã€é«˜æ•ˆçš„å·¥å…·å’Œåº“é›†åˆï¼Œæ¥å¤„ç†å›¾åƒçš„è¯»å–ã€å†™å…¥å’Œæ“ä½œï¼Œæ”¯æŒè¶…è¿‡88ç§å›¾åƒæ ¼å¼ï¼ŒåŒ…æ‹¬é‡è¦çš„DPXã€GIFã€JPEGã€JPEG-2000ã€PNGã€PDFã€PNMå’ŒTIFFã€‚ å…¶å®GraphicsMagickæ˜¯ä» ImageMagick 5.5.2 åˆ†æ”¯å‡ºæ¥çš„ï¼Œä½†æ˜¯ç°åœ¨ä»–å˜å¾—æ›´ç¨³å®šå’Œä¼˜ç§€ã€‚ ä½•ä¸ºImageMagick? ImageMagickæ˜¯ä¸€æ¬¾åˆ›å»ºã€ç¼–è¾‘ã€åˆæˆï¼Œè½¬æ¢å›¾åƒçš„å‘½ä»¤è¡Œå·¥å…·ã€‚æ”¯æŒæ ¼å¼è¶…è¿‡ 200 ç§ï¼ŒåŒ…æ‹¬å¸¸è§çš„ PNG, JPEG, GIF, HEIC, TIFF, DPX, EXR, WebP, Postscript, PDF, SVG ç­‰ã€‚åŠŸèƒ½åŒ…æ‹¬è°ƒæ•´ï¼Œç¿»è½¬ï¼Œé•œåƒ(mirror)ï¼Œæ—‹è½¬ï¼Œæ‰­æ›²ï¼Œä¿®å‰ªå’Œå˜æ¢å›¾åƒï¼Œè°ƒæ•´å›¾åƒé¢œè‰²ï¼Œåº”ç”¨å„ç§ç‰¹æ®Šæ•ˆæœï¼Œæˆ–ç»˜åˆ¶æ–‡æœ¬ï¼Œçº¿æ¡ï¼Œå¤šè¾¹å½¢ï¼Œæ¤­åœ†å’Œè´å¡å°”æ›²çº¿ç­‰ã€‚ ä½†æ˜¯å¯¹äºnodeæ¥è¯´ä»–ä»¬å¥½åƒå¸®ä¸ä¸Šä»€ä¹ˆå¿™ï¼Œå› æ­¤gmä¸ºäº†nodeï¼Œå°†äºŒè€…åšäº†å°è£…ã€‚ åœ¨å¼€å§‹gmä¹‹å‰é¦–å…ˆéœ€è¦å®‰è£…GraphicsMagickå’ŒImageMagickï¼Œ1brew install imagemagick graphicsmagick å®‰è£…å®Œæ¯•åï¼Œå®‰è£…gm npm i gm â€“save ä¸Šä»£ç ï¼š123456789101112const gm = require('gm')gm('./nodeimg.png') .draw('image Over 46, 706, 102, 102 \"./code.png\"') .draw('image Over 479,704, 152,56 \"./beike.png\"') //.stream() .write(`./output/$&#123;Date.now()&#125;.jpg`, function(err) &#123; if (!err) &#123; console.log('done') &#125;else &#123; console.log(err.message || \"å‡ºé”™äº†ï¼\"); &#125; &#125;) nodeæ‰§è¡Œç›¸å…³jsã€‚æˆåŠŸè¿”å›å›¾ç‰‡ä¿¡æ¯ã€‚ å¯¹äºå›¾ç‰‡æ¥è¯´æˆ‘ä»¬ä¼šå°†å…¶å­˜å‚¨åˆ°cdnä¸­ã€‚ä½†æ˜¯å¯¹äºæˆ‘ä»¬çš„ä¸šåŠ¡æ¥è¯´ï¼Œè¿™ä¸ªéœ€è¦ç»“åˆBUCKYçš„ä¸Šä¼ ç»„ä»¶ï¼Œæ­¤ç»„ä»¶æ˜¯åŸºäºAWS.S3ï¼Œbuckyæ²¡æœ‰è¿‡å¤šé˜è¿°ç›¸å…³ç”¨æ³•ï¼Œè¯¦ç»† API è¯´æ˜å¯è§ http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.htmlã€‚ æˆ‘ä»¬çœ‹ä»¥ä¸‹æ–‡æ¡£å‘ç°ï¼Œs3 ä¸Šä¼ å›¾ç‰‡éœ€è¦ä¸€ä¸ªstream objectå¯¹è±¡å­˜åœ¨ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å°†gmçš„ç»˜å›¾ç»“æœé€šè¿‡stream()APIè¿›è¡Œè½¬åŒ–ï¼Œå®ç°s3éœ€è¦çš„streamå¯¹è±¡ã€‚ä¸Šä¼ æ“ä½œåˆ‡è®°éœ€è¦async/awaitæ”¯æŒå“ˆã€‚ æœ€ç»ˆå®ç°å°±ç•™ç»™å¤§å®¶ä¸Šæ‰‹äº†ã€‚ nodeå®è·µï¼š123456789101112131415const gm = require('gm')let body = gm('./nodeimg.png').draw('image Over 46, 706, 102, 102 \"./code.png\"').draw('image Over 479,724, 152,56 \"./beike.png\"').fontSize(36).font('./font/FZZXHJW.TTF').stroke(\"#999999\",2).drawText(200,764, \"å¢é•¿çº¿å‰ç«¯å‡ºå“\") .write(`./output/gm$&#123;Date.now()&#125;.jpg`, function(err) &#123; if (!err) &#123; console.log('done') &#125;else &#123; console.log(err.message || \"å‡ºé”™äº†ï¼\"); &#125; &#125;) æ¸©é¦¨æç¤ºï¼šä½¿ç”¨å­—ä½“æ—¶æ³¨æ„ç‰ˆæƒé—®é¢˜å“ˆã€‚","categories":[{"name":"æŠ€æœ¯æ‚è®°","slug":"æŠ€æœ¯æ‚è®°","permalink":"http://yoursite.com/categories/æŠ€æœ¯æ‚è®°/"}],"tags":[{"name":"Node","slug":"Node","permalink":"http://yoursite.com/tags/Node/"}]},{"title":"ä¸€èµ·æ¥å­¦async/await","slug":"await","date":"2018-11-30T08:08:54.629Z","updated":"2019-03-11T08:33:42.551Z","comments":true,"path":"2018/11/30/await/","link":"","permalink":"http://yoursite.com/2018/11/30/await/","excerpt":"","text":"ä¸€é“é¢˜1234567891011121314151617181920async function async1()&#123; console.log(&apos;1&apos;) await async2() console.log(&apos;2&apos;)&#125;async function async2()&#123; console.log(&apos;3&apos;)&#125;console.log(&apos;4&apos;)setTimeout(function()&#123; console.log(&apos;5&apos;) &#125;,0) async1();new Promise(function(resolve)&#123; console.log(&apos;6&apos;) resolve();&#125;).then(function()&#123; console.log(&apos;7&apos;)&#125;)console.log(&apos;8&apos;) ç†è§£async/awaitå›è°ƒå‡½æ•°ï¼Œäº‹ä»¶ç›‘å¬ï¼Œäº‹ä»¶è®¢é˜…ï¼Œåˆ° Promise å¯¹è±¡ï¼Œå†åˆ° Generator å‡½æ•°ï¼Œè¿½æ±‚è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜123456789101112131415161718192021222324252627282930313233343536373839404142434445464748å›è°ƒå‡½æ•°getData( a =&gt; &#123; getTwoData( a, b =&gt; &#123; getThreeData( b,c =&gt; &#123; getFourData( c, d =&gt; &#123; console.log(&apos;ç»ˆäºåµŒå¥—å®Œäº†&apos;) &#125;) &#125;) &#125;)&#125;)Promiseæ”¹è¿›ågetData().then( a =&gt; &#123; return getTwoData(a)&#125;).then( b =&gt; &#123; return getThreeData(a)&#125;).then( c =&gt; &#123; return getFourData(c)&#125;)Generator function* helloWorldGenerator() &#123; yield &apos;hello&apos;; yield &apos;world&apos;; return &apos;ending&apos;;&#125;var hw = helloWorldGenerator();hw.next()hw.next()hw.next()Generator æ”¹è¿›å+ co æ¨¡å—const co = require(&apos;co&apos;);const gen = co(function* () &#123; const a = yield getData(); const b = yield getTwoData(); const c = yield getThreeData(); const d = yield getFourData();&#125;);async/await æ”¹è¿›åasync () =&gt; &#123; const a = await getData() const b = await getTwoData() const c = await getThreeData() const d = await getFourData() console.log(d)&#125; asyncasync/awaitå¯ä»¥è¯´æ˜¯coæ¨¡å—å’Œç”Ÿæˆå™¨å‡½æ•°çš„è¯­æ³•ç³–ã€‚ç”¨æ›´åŠ æ¸…æ™°çš„è¯­ä¹‰è§£å†³jså¼‚æ­¥ä»£ç ã€‚ä½¿ç”¨ async / await, æ­é… promise, å¯ä»¥é€šè¿‡ç¼–å†™å½¢ä¼¼åŒæ­¥çš„ä»£ç æ¥å¤„ç†å¼‚æ­¥æµç¨‹, æé«˜ä»£ç çš„ç®€æ´æ€§å’Œå¯è¯»æ€§Promiseå®ç°1234567891011121314151617181920212223242526272829303132async function fn(args) &#123; &#125;// ç­‰åŒäºfunction fn(args) &#123; return sp(function* () &#123; &#125;);&#125;function sp(genF) &#123; return new Promise(function(resolve, reject) &#123; const gen = genF(); function step(nextF) &#123; let next; try &#123; next = nextF(); &#125; catch(e) &#123; return reject(e); &#125; if(next.done) &#123; return resolve(next.value); &#125; Promise.resolve(next.value).then(function(v) &#123; step(function() &#123; return gen.next(v); &#125;); &#125;, function(e) &#123; step(function() &#123; return gen.throw(e); &#125;); &#125;); &#125; step(function() &#123; return gen.next(undefined); &#125;); &#125;);&#125; asyncå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ â€“ asyncå‡½æ•°ä¸­æ˜¯returnä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼å°±æ˜¯Promiseå¯¹è±¡ä¸­resolveçš„å€¼ï¼› â€“ asyncå‡½æ•°ä¸­æ˜¯throwä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼å°±æ˜¯Promiseå¯¹è±¡ä¸­rejectçš„å€¼ã€‚12345678910111213141516const imAsync = async (num) =&gt; &#123; if (num &gt; 0) &#123; return num // è¿™é‡Œç›¸å½“äºresolve(num) &#125; else &#123; throw num // è¿™é‡Œç›¸å½“äºreject(num) &#125;&#125;imAsync(1).then( v =&gt; &#123; console.log(v);&#125;);// æ³¨æ„è¿™é‡Œæ˜¯catchimAsync(0).catch( v =&gt; &#123; console.log(v);&#125;) 1234567891011121314151617const imAsync1 = (num) =&gt; &#123; return new Promise ( (resolve, reject) =&gt; &#123; if (num &gt; 0) &#123; resolve(num) &#125; else &#123; reject(num) &#125; &#125;)&#125;imAsync1(1).then( v =&gt; &#123; console.log(v);&#125;);imAsync1(0).catch( v =&gt; &#123; console.log(v);&#125;) awaitawaitä¼šæš‚åœå½“å‰asyncå‡½æ•°çš„æ‰§è¡Œï¼Œç­‰å¾…Promiseçš„è®¡ç®—ç»“æœè¿”å›ä»¥åå†ç»§ç»­æ‰§è¡Œå½“å‰çš„asyncå‡½æ•° â€“ await ç­‰å¾…çš„ä¸æ˜¯æ‰€æœ‰çš„å¼‚æ­¥æ“ä½œï¼Œç­‰å¾…çš„åªæ˜¯Promise â€“ awaitå‘½ä»¤åé¢æ˜¯ä¸€ä¸ªthenableå¯¹è±¡ï¼ˆå³å®šä¹‰thenæ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆawaitä¼šå°†å…¶ç­‰åŒäº Promise å¯¹è±¡ â€“ ä»»ä½•ä¸€ä¸ªawaitè¯­å¥åé¢çš„ Promise å¯¹è±¡å˜ä¸ºrejectçŠ¶æ€ï¼Œé‚£ä¹ˆæ•´ä¸ªasyncå‡½æ•°éƒ½ä¼šä¸­æ–­æ‰§è¡Œ12345678910111213141516171819202122const awaitTest = async () =&gt; &#123; console.log(1); await setTimeout(function () &#123; console.log(2); &#125;, 1000); console.log(3);&#125;awaitTest()const awaitTest = async () =&gt; &#123; console.log(1); await new Promise ( (resolve, reject) =&gt; &#123; setTimeout(function () &#123; console.log(2); console.time(&apos;beigin&apos;) resolve() &#125;, 1000); &#125;) console.timeEnd(&apos;beigin&apos;) console.log(3);&#125;awaitTest() asyncå‡½æ•°å¯¹ Generatorå‡½æ•°çš„æ”¹è¿›ï¼ˆ1ï¼‰å†…ç½®æ‰§è¡Œå™¨Generator å‡½æ•°çš„æ‰§è¡Œå¿…é¡»é æ‰§è¡Œå™¨ï¼Œæ‰€ä»¥æ‰æœ‰äº†coæ¨¡å—ï¼Œè€Œasyncå‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œï¼ˆ2ï¼‰æ›´å¥½çš„è¯­ä¹‰ï¼ˆ3ï¼‰æ›´å¹¿çš„é€‚ç”¨æ€§ï¼ˆ4ï¼‰è¿”å›å€¼æ˜¯ Promise awaitç”¨äºä¸€ä¸ªå¼‚æ­¥æ“ä½œä¹‹å‰ï¼Œè¡¨ç¤ºè¦â€œç­‰å¾…â€è¿™ä¸ªå¼‚æ­¥æ“ä½œçš„è¿”å›å€¼ã€‚awaitä¹Ÿå¯ä»¥ç”¨äºä¸€ä¸ªåŒæ­¥çš„å€¼ã€‚co å‡½æ•°åº“å…¶å®å°±æ˜¯å°†ä¸¤ç§è‡ªåŠ¨æ‰§è¡Œå™¨ï¼ˆThunk å‡½æ•°å’Œ Promise å¯¹è±¡ï¼‰ï¼ŒåŒ…è£…æˆä¸€ä¸ªåº“æ¥å— Generator å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œä¸ç”¨ç¼–å†™ Generator å‡½æ•°çš„æ‰§è¡Œå™¨ toPromiseé€šè¿‡åˆ¤å®šå‚æ•°çš„ç±»å‹ï¼Œç„¶åå†é€šè¿‡è½¬ç§»æ§åˆ¶æƒç»™ä¸åŒçš„å‚æ•°å¤„ç†å‡½æ•°ï¼Œä»è€Œè·å–åˆ°æœŸæœ›è¿”å›çš„å€¼ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364function toPromise(obj) &#123; if (!obj) return obj; if (isPromise(obj)) return obj; if (isGeneratorFunction(obj) || isGenerator(obj)) return co.call(this, obj); if (&apos;function&apos; == typeof obj) return thunkToPromise.call(this, obj); if (Array.isArray(obj)) return arrayToPromise.call(this, obj); if (isObject(obj)) return objectToPromise.call(this, obj); return obj;&#125;function objectToPromise(obj)&#123; //è·å–ä¸€ä¸ªå’Œä¼ å…¥çš„å¯¹è±¡ä¸€æ ·æ„é€ å™¨çš„å¯¹è±¡ var results = new obj.constructor(); //è·å–å¯¹è±¡çš„æ‰€æœ‰å¯ä»¥éå†çš„key var keys = Object.keys(obj); var promises = []; for (var i = 0; i &lt; keys.length; i++) &#123; var key = keys[i]; //æ¯ä¸€ä¸ªé¡¹éƒ½è°ƒç”¨ä¸€æ¬¡toPromiseæ–¹æ³•ï¼Œå˜æˆPromiseå¯¹è±¡ var promise = toPromise.call(this, obj[key]); //å¦‚æœé‡Œé¢æ˜¯Promiseå¯¹è±¡çš„è¯ï¼Œåˆ™å–å‡ºeé‡Œé¢resolvedåçš„å€¼ if (promise &amp;&amp; isPromise(promise)) defer(promise, key); else results[key] = obj[key]; &#125; //å¹¶è¡Œï¼ŒæŒ‰é¡ºåºè¿”å›ç»“æœï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ return Promise.all(promises).then(function () &#123; return results; &#125;); function defer(promise, key) &#123; results[key] = undefined; promises.push(promise.then(function (res) &#123; results[key] = res; &#125;)); &#125;&#125;function thunkToPromise(fn) &#123; var ctx = this; return new Promise(function (resolve, reject) &#123; fn.call(ctx, function (err, res) &#123; if (err) return reject(err); if (arguments.length &gt; 2) res = slice.call(arguments, 1); resolve(res); &#125;); &#125;);&#125;function arrayToPromise(obj) &#123; return Promise.all(obj.map(toPromise, this));&#125;function isPromise(obj) &#123; return &apos;function&apos; == typeof obj.then;&#125;function isGenerator(obj) &#123; return &apos;function&apos; == typeof obj.next &amp;&amp; &apos;function&apos; == typeof obj.throw;&#125;function isGeneratorFunction(obj) &#123; var constructor = obj.constructor; if (!constructor) return false; if (&apos;GeneratorFunction&apos; === constructor.name || &apos;GeneratorFunction&apos; === constructor.displayName) return true; return isGenerator(constructor.prototype);&#125;function isObject(val) &#123; return Object == val.constructor;&#125; async/await é”™è¯¯å¤„ç†12345678async function f() &#123; await Promise.reject(&apos;å‡ºé”™äº†&apos;);&#125;f().then(v =&gt; console.log(&apos;1&apos;, v)).catch(e =&gt; console.log(&apos;é”™è¯¯&apos;, e))// å‡ºé”™äº† 123456789async function f() &#123; let a = await Promise.reject(&apos;hello world1&apos;); let b = await Promise.resolve(&apos;hello world2&apos;); // ä¸ä¼šæ‰§è¡Œ console.log(a, b)&#125;f().then(v =&gt; console.log(&apos;1&apos;, v)).then(v =&gt; console.log(&apos;2&apos;, v)).catch(e =&gt; console.log(&apos;é”™è¯¯&apos;, e)) 12345678910async function f() &#123; try &#123; await Promise.reject(&apos;å‡ºé”™äº†&apos;); &#125; catch(e) &#123; &#125; return await Promise.resolve(&apos;hello world&apos;);&#125;f().then(v =&gt; console.log(v)) 12345678910async function f() &#123; await Promise.reject(&apos;å‡ºé”™äº†&apos;) .catch(e =&gt; console.log(e)); return await Promise.resolve(&apos;hello world&apos;);&#125;f().then(v =&gt; console.log(v))// å‡ºé”™äº†// hello world å¦‚æœæœ‰å¤šä¸ªawaitå‘½ä»¤ï¼Œå¯ä»¥ç»Ÿä¸€æ”¾åœ¨tryâ€¦catchç»“æ„ä¸­ã€‚12345678910111213async function main() &#123; try &#123; const val1 = await Promise.reject(&apos;å‡ºé”™äº†&apos;); const val2 = await Promise.resolve(&apos;çˆ±ä½ 1&apos;); const val3 = await Promise.resolve(&apos;çˆ±ä½ 2&apos;); console.log(&apos;Final: &apos;, val2); &#125; catch (err) &#123; console.error(&apos;error&apos;, err); &#125;&#125;main() tryâ€¦catchç»“æ„ï¼Œå®ç°å¤šæ¬¡é‡å¤å°è¯• 12345678910111213const NUM_RETRIES = 3;async function test() &#123; let i; for (i = 0; i &lt; NUM_RETRIES; ++i) &#123; try &#123; await Promise.resolve(&apos;å‡ºé”™äº†&apos;); break; &#125; catch(err) &#123;&#125; &#125; console.log(i);&#125;test(); å¤šä¸ªawaitå‘½ä»¤åé¢çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ç»§å‘å…³ç³»ï¼Œæœ€å¥½è®©å®ƒä»¬åŒæ—¶è§¦å‘1let [foo, bar] = await Promise.all([getFoo(), getBar()]);","categories":[{"name":"å‰ç«¯å­¦ä¹ ","slug":"å‰ç«¯å­¦ä¹ ","permalink":"http://yoursite.com/categories/å‰ç«¯å­¦ä¹ /"}],"tags":[{"name":"Promise","slug":"Promise","permalink":"http://yoursite.com/tags/Promise/"}]},{"title":"Promiseå®è·µ","slug":"promiseå®è·µåˆ†äº«","date":"2018-11-27T09:28:03.417Z","updated":"2019-03-11T08:27:50.687Z","comments":true,"path":"2018/11/27/promiseå®è·µåˆ†äº«/","link":"","permalink":"http://yoursite.com/2018/11/27/promiseå®è·µåˆ†äº«/","excerpt":"","text":"promiseå­¦ä¹ ç¬”è®°ä¸€ JSå¼‚æ­¥ï¼š 1ã€ å›è°ƒå‡½æ•° 2ã€äº‹ä»¶å‘å¸ƒ/è®¢é˜…æ¨¡å¼ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰ 3ã€ä½¿ç”¨Promiseå¯¹è±¡ 4ã€ä½¿ç”¨Generatorå‡½æ•° 5ã€ä½¿ç”¨asyncå‡½æ•° â€¦ç­‰ç­‰ Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚è§£å†³äº†ä»£ç ç¼©è¿›çš„é‡‘å­—å¡”é—®é¢˜ äºŒ å®ç°æ–¹å¼ï¼š ç”¨ new Promise æ–¹æ³•åˆ›å»ºpromiseå¯¹è±¡ ç”¨.then æˆ– .catch æ·»åŠ promiseå¯¹è±¡çš„å¤„ç†å‡½æ•° åŸºæœ¬å†™æ³•ï¼š const promise =newPromise(function(resolve, reject){ // ... some code if(/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){ resolve(value); }else{ reject(error); } }); promise.then(res =&gt;{}).catch(err=&gt;{}) ä¸‰ ä¸‰ç§çŠ¶æ€ ä»Pendingè½¬æ¢ä¸ºFulfilledæˆ–Rejectedä¹‹åï¼Œ è¿™ä¸ªpromiseå¯¹è±¡çš„çŠ¶æ€å°±ä¸ä¼šå†å‘ç”Ÿä»»ä½•å˜åŒ– var promise =newPromise(function(resolve){ resolve(42); reject(30) }); promise.then(function(value){ console.log(value); }).catch(err =&gt;{ console.log(err) }); å›› ç”¨return æ›¿ä»£*resolve æ— æ³•æ”¹å˜çŠ¶æ€ æ— æ³•é“¾å¼è°ƒç”¨ const testReturn =(a)=&gt;{ returnnewPromise((resolve,reject)=&gt;{ if(a){ return&apos;this is return&apos;; //resolve(&apos;true&apos;); }else{ reject(&apos;false&apos;); } }) } testReturn(true).then(res =&gt;{console.log(res)}) æ‹¿ä¸åˆ°returnç»“æœï¼Œä¸”promiseçŠ¶æ€ä¸ä¼šå˜ï¼Œä¾ç„¶æ˜¯pendingçŠ¶æ€ã€‚ äº” ç”¨throw ä»£æ›¿ reject promiseå¯¹è±¡ä¹Ÿå˜ä¸ºRejectedçŠ¶æ€ï¼Œä½†æ˜¯throw Errorä¸ä¼šè¢«catchçš„ const testReturn =(a)=&gt;{ returnnewPromise((resolve,reject)=&gt;{ if(a){ thrownewError(&apos;error&apos;); //reject((&apos;error&apos;) } }) } testReturn(true).catch(res =&gt;{console.log(res)}) å…­ ä»£ç æ‰§è¡Œé¡ºåºé—®é¢˜new Promiseæ˜¯åŒæ­¥çš„ï¼Œä¼šé©¬ä¸Šæ‰§è¡Œfunctionå‚æ•°ä¸­çš„ä»£ç ã€‚ç­‰functionå‚æ•°æ‰§è¡Œå®Œï¼Œnew Promiseæ‰è¿”å›ä¸€ä¸ªpromiseå®ä¾‹å¯¹è±¡ã€‚è¿™æ—¶å€™å†è°ƒç”¨thenï¼Œå…¶å®æ˜¯å·²ç»fullfilläº† ç®€å•ä¾‹å­ï¼š var promise =newPromise(function(resolve){ console.log(&quot;inner promise&quot;);// 1 resolve(42); }); promise.then(function(value){ console.log(value);// 3 }); console.log(&quot;outer promise&quot;);// 2 newPromise(resolve =&gt;{ console.log(1); resolve(3); Promise.resolve().then(()=&gt; console.log(4)) }).then(num =&gt;{ console.log(num) }); console.log(2); å½“promiseé‡åˆ°setTimeout, resolveä¼šå°†Promise.thenæ”¾åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚è€ŒsetTimeout å±äº macrotask å®ä»»åŠ¡ã€‚ æµè§ˆå™¨çš„ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­åªæœ‰ä¸€ä¸ªmacrotaskä»»åŠ¡ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªmicrotaskä»»åŠ¡ã€‚ promiseé˜Ÿåˆ—ä¸­ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå†æ‰§è¡ŒsetTimeoutçš„ä»»åŠ¡é˜Ÿåˆ—ã€‚ é¦–å…ˆï¼ŒsetTimeout è¢«æ¨è¿›åˆ° macrotask é˜Ÿåˆ—(å°†åœ¨ä¸‹ä¸€ä¸ªmacrotaskä¸­æ‰§è¡Œ)ä¸­ -&gt;å…ˆæ‰§è¡Œ macrotask ä¸­çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼ˆæ•´ä¸ªscriptä¸­çš„åŒæ­¥ä»£å’Œpromise æ„é€ å‡½æ•° ï¼‰-&gt;promise.then å›è°ƒè¢«æ¨è¿›åˆ° microtask é˜Ÿåˆ—ä¸­ (æ­¤æ—¶ï¼Œå·²ç»æ‰§è¡Œå®Œäº†ç¬¬ä¸€ä¸ª macrotask) , -&gt;é¡ºåºæ‰§è¡Œæ‰€æœ‰çš„ microtask, (ä¹Ÿå°±æ˜¯ promise.then çš„å›è°ƒå‡½æ•°)ã€‚ æ­¤æ—¶ï¼Œmicrotask é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œå‰©ä¸‹çš„ macrotask é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡setTimeout. setTimeout(function(){ console.log(4) },0); newPromise(function(resolve){ console.log(1) for(var i=0; i&lt;10000; i++){ i==9999&amp;&amp; resolve(5) } console.log(2) }) .then(function(res){ console.log(res) }); console.log(3); å¦ä¸€ç§æƒ…å†µ: resolveåœ¨setTimeoutä¸­ 1-&gt;2-&gt;4(å®ä»»åŠ¡ç»“æŸ)-&gt;3(å¾®ä»»åŠ¡ç»“æŸ) const testReturn =(a)=&gt;{ returnnewPromise((resolve,reject)=&gt;{ setTimeout(()=&gt;{ if(a){ resolve(3); console.log(2); }else{ reject(&apos;false&apos;); } }) console.log(1); }) } testReturn(true).then(str=&gt;{ console.log(str); // console.log(testReturn) }).catch(err=&gt;{ console.log(&apos;err: &apos;,err); }) å½“æœ‰Errorçš„æ—¶å€™ï¼ŒErroråé¢çš„ä»£ç ä¸ä¼šè¢«æ‰§è¡Œï¼Œä½†æ˜¯Promiseçš„ç»“æœä¾æ—§æ˜¯fulfilled const testReturn =(a)=&gt;{ returnnewPromise((resolve,reject)=&gt;{ if(a){ resolve(&apos;exec true&apos;); console.log(&apos;this will be exec&apos;); thrownewError(&apos;error&apos;); console.log(&apos;this will not be exec&apos;) }else{ reject(&apos;false&apos;); } }) } testReturn(true).then(str=&gt;{ console.log(str); // console.log(testReturn) }).catch(err=&gt;{ console.log(&apos;err: &apos;,err); }) ä¸ƒ cacth() å’Œ then(null, ..) ä½¿ç”¨promise.then(onFulfilled, onRejected) : åœ¨ onFulfilled ä¸­å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œåœ¨ onRejected ä¸­æ•è·ä¸åˆ°è¿™ä¸ªå¼‚å¸¸ã€‚ ä½¿ç”¨ promise.then(onFulfilled).catch(onRejected) çš„æƒ…å†µä¸‹: then ä¸­äº§ç”Ÿçš„å¼‚å¸¸èƒ½åœ¨ .catch ä¸­æ•è· æ‰€ä»¥ï¼Œcacth() å’Œ then(null, ..)å¹¶ä¸å®Œå…¨ç›¸åŒ function throwError(value){ // æŠ›å‡ºå¼‚å¸¸ thrownewError(value); } // &lt;1&gt; onRejectedä¸ä¼šè¢«è°ƒç”¨ function badMain(onRejected){ returnPromise.resolve(42).then(throwError, onRejected); } // &lt;2&gt; æœ‰å¼‚å¸¸å‘ç”Ÿæ—¶onRejectedä¼šè¢«è°ƒç”¨ function goodMain(onRejected){ returnPromise.resolve(42).then(throwError).catch(onRejected); } // è¿è¡Œç¤ºä¾‹ badMain(function(){ console.log(&quot;BAD&quot;); }); goodMain(function(){ console.log(&quot;GOOD&quot;); }); å…« chain é“¾å¼è°ƒç”¨ åœ¨ then æ–¹æ³•å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸‰ä»¶äº‹ï¼š return ä¸€ä¸ª promise å¯¹è±¡ return ä¸€ä¸ªåŒæ­¥çš„å€¼æˆ–è€…æ˜¯ undefined åŒæ­¥çš„ throw ä¸€ä¸ªé”™è¯¯ ä¼ ç»™æ¯ä¸ªthen æ–¹æ³•çš„value çš„å€¼éƒ½æ˜¯å‰ä¸€ä¸ªpromiseå¯¹è±¡é€šè¿‡return è¿”å›çš„å€¼ã€‚å®ç°ä¾èµ–äº then æ–¹æ³•æ¯æ¬¡éƒ½ä¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„promiseå¯¹è±¡ var aPromise =newPromise(function(resolve){ resolve(100); }); aPromise.then(function(value){ return value *2; }); aPromise.then(function(value){ return value *2; }); aPromise.then(function(value){ console.log(&quot;1: &quot;+ value);// =&gt; 100 }) var bPromise =newPromise(function(resolve){ resolve(100); }); bPromise.then(function(value){ return value *2; }).then(function(value){ return value *2; }).then(function(value){ console.log(&quot;2: &quot;+ value);// =&gt; 100 * 2 * 2 }); thençš„é”™è¯¯å†™æ³•ï¼špromise.then ä¸­äº§ç”Ÿçš„å¼‚å¸¸ä¸ä¼šè¢«å¤–éƒ¨æ•è·ï¼Œæ­¤å¤–ï¼Œå³ä½¿ thenæœ‰è¿”å›å€¼ï¼Œä¹Ÿæ‹¿ä¸åˆ°è¿”å›å€¼ã€‚ function badAsyncCall(){ var promise =Promise.resolve(&apos;111&apos;); promise.then(function(){ // ä»»æ„å¤„ç† return&apos;222&apos;; }); return promise; } badAsyncCall().then(res =&gt;{console.log(res)}) function anAsyncCall(){ var promise =Promise.resolve(&apos;111&apos;); return promise.then(function(){ // ä»»æ„å¤„ç† return&apos;222&apos;; }); } anAsyncCall().then(res =&gt;{console.log(res)}) ä¹ thenåŒæ—¶å¤„ç†å¤šä¸ªå¼‚æ­¥è¯·æ±‚: Promise.all åœ¨æ¥æ”¶åˆ°çš„æ‰€æœ‰çš„å¯¹è±¡promiseéƒ½å˜ä¸º FulFilled æˆ–è€… Rejected çŠ¶æ€ä¹‹åæ‰ä¼šç»§ç»­è¿›è¡Œåé¢çš„å¤„ç†ï¼Œ Promise.all() ä»¥ä¸€ä¸ª promise å¯¹è±¡ç»„æˆçš„æ•°ç»„ä¸ºè¾“å…¥ï¼Œè¿”å›å¦ä¸€ä¸ª promise å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„çŠ¶æ€åªä¼šåœ¨æ•°ç»„ä¸­æ‰€æœ‰çš„ promise å¯¹è±¡çš„çŠ¶æ€éƒ½å˜ä¸º resolved çš„æ—¶å€™æ‰ä¼šå˜æˆ resolvedã€‚å¯ä»¥å°†å…¶ç†è§£ä¸ºå¼‚æ­¥çš„ for å¾ªç¯ã€‚ Promise.race() åªè¦æœ‰ä¸€ä¸ªpromiseå¯¹è±¡è¿›å…¥ FulFilled æˆ–è€… Rejected çŠ¶æ€çš„è¯ï¼Œå°±ä¼šç»§ç»­è¿›è¡Œåé¢çš„å¤„ç†ï¼Œé‚£ä¸ªç‡å…ˆæ”¹å˜çš„Promise å®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚romise.race åœ¨ç¬¬ä¸€ä¸ªpromiseå¯¹è±¡å˜ä¸ºFulfilledä¹‹åï¼Œå¹¶ä¸ä¼šå–æ¶ˆå…¶ä»–promiseå¯¹è±¡çš„æ‰§è¡Œ var winnerPromise =newPromise(function(resolve){ setTimeout(function(){ console.log(&apos;this is winner&apos;); resolve(&apos;this is winner&apos;); },4); }); var loserPromise =newPromise(function(resolve){ setTimeout(function(){ console.log(&apos;this is loser&apos;); resolve(&apos;this is loser&apos;); },1000); }); // ç¬¬ä¸€ä¸ªpromiseå˜ä¸ºresolveåç¨‹åºåœæ­¢ Promise.race([winnerPromise, loserPromise]).then(function(value){ console.log(value);// =&gt; &apos;this is winner&apos; }); // promise.all è§£å†³ forEaché—®é¢˜ var winnerPromise =newPromise(function(resolve){ resolve([1,2,3,4,5,6]) }); //é”™è¯¯ winnerPromise.then(function(result){ result.forEach(function(row){ return result }); }).then(function(res){ console.log(res) // I naively believe all docs have been removed() now! }); //æ­£ç¡® winnerPromise.then(function(result){ returnPromise.all(result.map(function(row){ return result })); }).then(function(res){ console.log(res) // All docs have really been removed() now! }) å new Promiseçš„å¿«æ·æ–¹å¼ function p (num){ if(num &gt;=0){ returnPromise.resolve(num) }else{ returnPromise.reject(newError(&apos;å‚æ•°ä¸èƒ½å°äº 0&apos;)) } } p.then(res=&gt;{console.log(res)})","categories":[{"name":"æŠ€æœ¯æ‚è®°","slug":"æŠ€æœ¯æ‚è®°","permalink":"http://yoursite.com/categories/æŠ€æœ¯æ‚è®°/"}],"tags":[{"name":"Promise","slug":"Promise","permalink":"http://yoursite.com/tags/Promise/"}]},{"title":"åˆ©ç”¨VWï¼ŒRemå®ç°å‰ç«¯é¡µé¢çš„è‡ªé€‚åº”æ–¹æ¡ˆ","slug":"åˆ©ç”¨VWï¼ŒRemå®ç°å‰ç«¯é¡µé¢çš„è‡ªé€‚åº”æ–¹æ¡ˆ","date":"2018-10-24T06:52:48.466Z","updated":"2019-03-11T08:27:56.123Z","comments":true,"path":"2018/10/24/åˆ©ç”¨VWï¼ŒRemå®ç°å‰ç«¯é¡µé¢çš„è‡ªé€‚åº”æ–¹æ¡ˆ/","link":"","permalink":"http://yoursite.com/2018/10/24/åˆ©ç”¨VWï¼ŒRemå®ç°å‰ç«¯é¡µé¢çš„è‡ªé€‚åº”æ–¹æ¡ˆ/","excerpt":"","text":"==é¢˜è®°==ï¼šç›®å‰å¢é•¿å›¢é˜Ÿæ‰‹æœºç«¯é€‚é…æ–¹æ¡ˆä¸ç»Ÿä¸€ï¼Œåº”å¯¹WAPé¡µé¢çš„éœ€æ±‚å¼€å‘ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿæ ‡å‡†ç»Ÿä¸€å¯¹äºåç»­å¼€å‘è¿­ä»£å¾ˆå…³é”®ï¼Œæ‰€ä»¥åŸºäºè¿™ä¸ªå‡ºå‘ç‚¹å‰ç«¯å›¢é˜Ÿæå‡ºéœ€è¦åˆ¶å®šç›¸å…³æŠ€æœ¯æ ‡å‡†æ–¹æ¡ˆã€‚å…¶ä¸­ä»Šå¤©è¯´åˆ°çš„å…³äºç§»åŠ¨ç«¯é€‚é…å°±æ˜¯æˆ‘ä»¬å¼€å§‹çš„ç¬¬ä¸€æ­¥ã€‚ æŠ€æœ¯èƒŒæ™¯ 1.å“åº”å¼webè®¾è®¡èƒ½åšä»€ä¹ˆï¼Ÿ è®©ä¸€ä¸ªç½‘ç«™åŒæ—¶é€‚é…å¤šç§è®¾å¤‡å’Œå¤šä¸ªå±å¹•ï¼Œå¯ä»¥è®©ç½‘ç«™çš„å¸ƒå±€å’ŒåŠŸèƒ½éšç”¨æˆ·çš„ä½¿ç”¨ç¯å¢ƒï¼ˆå±å¹•å¤§å°ã€è¾“å…¥æ–¹å¼ã€è®¾å¤‡/æµè§ˆå™¨èƒ½åŠ›ï¼‰è€Œå˜åŒ–ã€‚ 2.ä»€ä¹ˆæ˜¯viewportï¼Ÿ æµè§ˆå™¨ä¸­ç”¨äºå‘ˆç°ç½‘é¡µçš„åŒºåŸŸå«è§†å£ï¼ˆviewportï¼‰è§†å£é€šå¸¸å¹¶ä¸ç­‰äºå±å¹•å¤§å°ï¼Œç‰¹åˆ«æ˜¯å¯ä»¥ç¼©æ”¾æµè§ˆå™¨çª—å£çš„æƒ…å†µä¸‹ã€‚ä¸ºäº†è§£å†³å‰é¢çš„é—®é¢˜ï¼Œå¯ä»¥åœ¨ç½‘é¡µçš„ä¸­æ·»åŠ ä¸‹é¢è¿™è¡Œä»£ç ï¼š 1&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui&quot;&gt; 3.Rem,Vwå…·ä½“æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ remçš„â€”â€”â€œfont size of the root elementâ€ viewportå®½åº¦æœ‰å…³ï¼Œ100%è§†å£å®½åº¦ = 100vw [vwå…¼å®¹æ€§] æŠ€æœ¯æ–¹æ¡ˆ==åˆ©ç”¨Rem Vw å®ç°å“åº”å¼å¸ƒå±€çš„åŸºå‡†== ++å®ç°æ–¹æ¡ˆï¼š++ åˆ©ç”¨lessçš„å‡½æ•°æ–¹å¼å®ç°ç›¸å…³è½¬æ¢å‡å®šå¯¹åº”çš„è®¾è®¡ç¨¿750pxå®½çš„ï¼Œ100vw,é‚£ä¹ˆé‡å‡ºæ¥çš„å®½åº¦ç›´æ¥ç”¨lessä¸­å®šä¹‰çš„å‡½æ•°è§£å†³å°±å¥½ï¼š123456789101112@clientW:750;.pxtovw(@value) &#123; @pxtovw:100vw*@value/@clientW; @pxtorem:@value/100rem;&#125;//å…·ä½“ä½¿ç”¨æ–¹å¼.blk_main&#123; .pxtovw(750); min-width:@pxtorem; min-width:@pxtovw;&#125; çº¯css3å±æ€§å®ç°æ— éœ€ç¼–è¯‘ (åŸºäºremçš„ è®¾è®¡ç¨¿750å®½ï¼Œå‡å®šå­—ä½“å¤§å°100px) 1.é€šç”¨æ–¹æ¡ˆ rem jså®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647(function(doc, win,baseDesignValue) &#123; var Dpr = 1, uAgent = window.navigator.userAgent; var isIOS = uAgent.match(/iphone/i); var is2345 = uAgent.match(/Mb2345/i); var ishaosou = uAgent.match(/mso_app/i); var isSogou = uAgent.match(/sogoumobilebrowser/ig); var isLiebao = uAgent.match(/liebaofast/i); var isGnbr = uAgent.match(/GNBR/i); function resizeRoot() &#123; var wWidth = (screen.width &gt; 0) ? (window.innerWidth &gt;= screen.width || window.innerWidth == 0) ? screen.width : window.innerWidth : window.innerWidth, wDpr, wFsize; var wHeight = (screen.height &gt; 0) ? (window.innerHeight &gt;= screen.height || window.innerHeight == 0) ? screen.height : window.innerHeight : window.innerHeight; if (window.devicePixelRatio) &#123; wDpr = window.devicePixelRatio; &#125; else &#123; wDpr = isIOS ? wWidth &gt; 818 ? 3 : wWidth &gt; 480 ? 2 : 1 : 1; &#125; if (isIOS) &#123; wWidth = screen.width; wHeight = screen.height; &#125; if (wWidth &gt; wHeight) &#123; wWidth = wHeight; &#125; wFsize = wWidth &gt; 540 ? 72 : wWidth*100 / baseDesignValue; wFsize = wFsize &gt; 32 ? wFsize : 32; window.screenWidth_ = wWidth; if (is2345 || ishaosou || isSogou || isLiebao || isGnbr) &#123; //è¿™é‡Œæœ‰ä¸ªåˆšè°ƒç”¨ç³»ç»Ÿæµè§ˆå™¨æ—¶å€™çš„bugï¼Œéœ€è¦ä¸€ç‚¹å»¶è¿Ÿæ¥è·å– setTimeout(function() &#123; wWidth = (screen.width &gt; 0) ? (window.innerWidth &gt;= screen.width || window.innerWidth == 0) ? screen.width : window.innerWidth : window.innerWidth; wHeight = (screen.height &gt; 0) ? (window.innerHeight &gt;= screen.height || window.innerHeight == 0) ? screen.height : window.innerHeight : window.innerHeight; wFsize = wWidth &gt; 540 ? 72 : wWidth / 7.5; wFsize = wFsize &gt; 32 ? wFsize : 32; document.getElementsByTagName(&apos;html&apos;)[0].style.fontSize = wFsize + &apos;px&apos;; &#125;, 500); &#125; else &#123; document.getElementsByTagName(&apos;html&apos;)[0].style.fontSize = wFsize + &apos;px&apos;; &#125; // alert(&quot;fz=&quot;+wFsize+&quot;;dpr=&quot;+window.devicePixelRatio+&quot;;UA=&quot;+uAgent+&quot;;width=&quot;+wWidth+&quot;;sw=&quot;+screen.width+&quot;;wiw=&quot;+window.innerWidth+&quot;;wsw=&quot;+window.screen.width+window.screen.availWidth); &#125; if (!doc.documentElement.addEventListener) return; doc.addEventListener(&apos;DOMContentLoaded&apos;, resizeRoot, false); resizeRoot(); &#125;)(document, window,750); 2.æ¿€è¿›çš„æ–¹æ¡ˆï¼šrem + vw + 1000pxå®½è®¾è®¡ç¨¿ 123456789101112131415161718192021222324252627@clientW:1000;.pxtovw(@value) &#123; @pxtovw:100vw*@value/@clientW; //@value/10 @pxtorem:@value/100rem;&#125;html &#123; height: 100%; font-size: 10vw; //100vw *100px/1000px line-height: 1; max-width: 750px; overflow-x: hidden; font-family: Microsoft YaHei, STHeiti, Helvetica, Arial, sans-serif!important&#125;.blk-main&#123; .pxtovw(640); min-width:@pxtorem; min-width:@pxtovw;&#125;æœ€ç»ˆ??ä¼˜åŒ–ï¼š å±æ€§å€¼ï¼š vw =&gt; é™¤ä»¥10 å•ä½vw rem =&gt; é™¤ä»¥100 å•ä½rem æœ€ç»ˆå¦‚æœè¦å…¼å®¹ä½ç‰ˆæœ¬ç»ˆç«¯ï¼Œæˆ‘å»ºè®®å°±ä½¿ç”¨REMå°±å¤Ÿäº†ï¼ŒVWä¹Ÿåªæ˜¯ä¸€ä¸ªæ–°çš„æ–¹æ³•ã€‚","categories":[{"name":"æŠ€æœ¯æ‚è®°","slug":"æŠ€æœ¯æ‚è®°","permalink":"http://yoursite.com/categories/æŠ€æœ¯æ‚è®°/"}],"tags":[{"name":"ç§»åŠ¨ç«¯è‡ªé€‚åº”","slug":"ç§»åŠ¨ç«¯è‡ªé€‚åº”","permalink":"http://yoursite.com/tags/ç§»åŠ¨ç«¯è‡ªé€‚åº”/"}]}]}